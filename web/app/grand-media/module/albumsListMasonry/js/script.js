var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(q,n,d){q!=Array.prototype&&q!=Object.prototype&&(q[n]=d.value)};$jscomp.getGlobal=function(q){return"undefined"!=typeof window&&window===q?q:"undefined"!=typeof global&&null!=global?global:q};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(q,n,d,w){if(n){d=$jscomp.global;q=q.split(".");for(w=0;w<q.length-1;w++){var v=q[w];v in d||(d[v]={});d=d[v]}q=q[q.length-1];w=d[q];n=n(w);n!=w&&null!=n&&$jscomp.defineProperty(d,q,{configurable:!0,writable:!0,value:n})}};
$jscomp.polyfill("Math.hypot",function(q){return q?q:function(n,d,q){n=Number(n);d=Number(d);var v,C=Math.max(Math.abs(n),Math.abs(d));for(v=2;v<arguments.length;v++)C=Math.max(C,Math.abs(arguments[v]));if(1E100<C||1E-100>C){n/=C;d/=C;var l=n*n+d*d;for(v=2;v<arguments.length;v++){var w=Number(arguments[v])/C;l+=w*w}return Math.sqrt(l)*C}l=n*n+d*d;for(v=2;v<arguments.length;v++)w=Number(arguments[v]),l+=w*w;return Math.sqrt(l)}},"es6","es3");
function codeasily_albumsListMasonrr_module(){function q(){this._listenerSet={}}function n(a,b,c){this.type=a;this.params=c;this.target=b}function d(a){return window[a]&&window[a].settings?window[a].settings:null}function w(a){a=new Date(1E3*a);var b=new Date,c=new Date(Date.now()-864E5),e=a.getFullYear(),f="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[a.getMonth()],d=a.getDate(),h=a.getHours(),g=a.getMinutes();return a.setHours(0,0,0,0)==b.setHours(0,0,0,0)?"Today, "+h+":"+g:a.setHours(0,
0,0,0)==c.setHours(0,0,0,0)?"Yesterday, "+h+":"+g:e==b.getFullYear()?d+" "+f+", "+e:d+" "+f+" "+e}function v(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveListener",null,b)}catch(c){}return a}function C(a){if("audio/mpeg"==a)return"audio";if("image"==a.split("/")[0])return"image"}function l(){return navigator.maxTouchPoints||"ontouchstart"in window}function O(a){for(var b=99999,c=0;c<a.childNodes.length;c++){var e=a.childNodes[c];
if(1==e.nodeType&&"SCRIPT"!=e.nodeName)var f=document.defaultView.getComputedStyle(e,null).getPropertyValue("z-index");f>b&&"auto"!=f&&(b=parseInt(f))}return b}function L(a){var b=0,c=document.createElement("div");c.className="gmAlbumsListMasonryPreloader";var e=document.createElement("div");e.style.position="absolute";e.style.width="8px";e.style.height="8px";e.style.margin="-4px";e.style.left="50%";e.style.top="50%";e.style.borderRadius="50%";e.style.backgroundColor=a;c.appendChild(e);e=document.createElement("div");
e.className="c-spinner";e.style.position="absolute";e.style.width="36px";e.style.height="36px";e.style.margin="-18px";e.style.left="50%";e.style.top="50%";for(var f=0;8>f;f++){var d=document.createElement("div");d.style.position="absolute";d.style.top="50%";d.style.left="50%";d.style.marginTop="-4px";d.style.marginLeft="-4px";d.style.width="8px";d.style.height="8px";d.style.backgroundColor=a;d.style.borderRadius="100%";d.style.transform="rotate("+b+"deg) translate(18px)";b+=45;e.appendChild(d)}c.appendChild(e);
return c}function J(a,b,c,e){this.x=a;this.y=b;this.width=c;this.height=e}function t(a,b){this.width=a;this.height=b}function p(a,b){this.x=a;this.y=b}function G(a,b,c,e,f,d){this.matrix=[[a,b,0],[c,e,0],[f,d,1]];return this}function T(a,b,c,e,f){this._matrix=new G(1,0,0,1,0,0);this._scaleX=a;this._scaleY=b;this._rotate=c;this._translateX=e;this._translateY=f}function P(a,b,c){this.x=a;this.y=b;this.z=c}function U(a){if(1==arguments.length)console.log(a);else{for(var b="",c=0;c<arguments.length;c++)b+=
arguments[c]+", ";b=b.slice(0,-2);console.log(b)}}function ma(a){if(0!=a.length)for(var b=0;b<a.length;b++)a[b].classList.remove("gmAlbumsListMasonryPopUpBodyChildecCollapse")}function V(){window.addEventListener&&(window.addEventListener("DOMMouseScroll",E,!1),window.addEventListener("touchmove",E,z));window.onwheel=E;window.onmousewheel=document.onmousewheel=E;document.onkeydown=na}function W(){window.removeEventListener&&(window.removeEventListener("DOMMouseScroll",E,!1),window.removeEventListener("touchmove",
E,z));window.onmousewheel=document.onmousewheel=null;window.onwheel=null;document.onkeydown=null}function na(a){if({37:1,38:1,39:1,40:1}[a.keyCode])return E(a),!1}function E(a){a=a||window.event;a.preventDefault&&a.preventDefault();a.returnValue=!1}function g(a,b){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,f,d){return b+b+f+f+d+d});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?"rgba("+parseInt(a[1],16)+","+parseInt(a[2],16)+","+parseInt(a[3],16)+","+b+")":null}function K(a,
b){for(var c in a)b[c]=a[c]}function X(a,b,c,e){var f=a.width;a=a.height;var d=b.width;b=b.height;c?c=Math.max(d/f,b/a):(c=Math.min(d/f,b/a),c=1<c?1:c);var h=Math.round(f*c),g=Math.round(a*c),m=Math.round((d-h)/2),l=Math.round((b-g)/2);return e?new T(c,c,0,(d-f)/2,(b-a)/2):new J(m,l,h,g)}function Q(a,b,c){function e(){var k=(new Date).getTime()-d,g=k/c;1>g?(g=1-f(g),a.style.opacity=String(g),setTimeout(e,Math.min(25,c-k))):(a.style.opacity="0",b&&b())}c||(c=500);var f=Math.sqrt,d=(new Date).getTime();
e()}function H(a,b,c,e,f){f&&d(b.appName).appEventManager.dispatchGMEvent(f);var k=new XMLHttpRequest;k.open("POST",d(b.appName).appApi,!0);try{var h=function(a){c&&setTimeout(function(){b[c](a,e)},500)};k.send(a);b&&"function"==typeof b.showPreloader&&c&&b.showPreloader(!0);k.onerror=function(d){1==confirm("Failed to load resource: The network connection was lost. Let's try again?")&&H(a,b,c,e,f)};k.onreadystatechange=function(){4==k.readyState&&200==k.status&&h(k.responseText)}}catch(F){U(F)}}function Y(a){function b(a){switch(a.type){case "mouseenter":c.selector.style.opacity=
"1";break;case "mouseleave":c._selected||(c.selector.style.opacity="0")}}var c=this;this.delegate=a;this.appName=a.appName;this.item=void 0;this.view=document.createElement("div");this.view.className="gmAlbumsListMasonryScrollBarItem";A&&this.view.classList.add("miniScreen");this.bgImg=document.createElement("div");this.bgImg.className="gmAlbumsListMasonryScrollBarItemBg";this.view.appendChild(this.bgImg);this.imgSRC=void 0;this.selector=document.createElement("div");this.selector.className="gmAlbumsListMasonryScrollBarItemHover";
this.selector.style.borderColor=g(d(this.appName).sliderNavigationIconColor,1);this.view.appendChild(this.selector);this._selected=!1;this.view.addEventListener("mouseenter",b,!1);this.view.addEventListener("mouseleave",b,!1)}function Z(a){this.delegate=a;this.appName=a.appName;this.view=document.createElement("div");this.view.className="gmAlbumsListMasonryTermScrollBarWrap";A&&this.view.classList.add("miniScreen");this.scrollView=document.createElement("div");this.scrollView.className="gmAlbumsListMasonryScrollView";
this.scrollView.style.width="0px";this.view.appendChild(this.scrollView);this.thumbsList=[];this._scrollWidth=0;this.dragging=this.viewCompleted=!1;this.scrollViewTranslateX=0;this.activAudioIndex=this.activIndex=this.startDragHandler=void 0}function aa(a,b,c,e){function f(a){if(!b.dragging){a=this.getAttribute("type");var f="menubar=no,toolbar=no,resizable=yes,scrollbars=yes, top=200, left="+(screen.width-600)/2+", height=450,width=600";switch(a){case "copy":F&&window.open(e,"_blank");a=document.getElementById("gmSH_title_copy");
f=this.getElementsByClassName("gmItemCopyLink")[0].getElementsByTagName("svg")[0];window.getSelection().selectAllChildren(a);try{document.execCommand("copy"),window.getSelection().removeAllRanges(),f.style.fill="green",a.style.color="green",F=!0}catch(I){window.open(e,"_blank")}break;case "google":window.open("https://plus.google.com/share?url="+e,"",f);break;case "facebook":window.open("https://www.facebook.com/share.php?u="+e,"",f);break;case "twitter":window.open("https://twitter.com/intent/tweet?text="+
encodeURI(c.title)+"&url="+e,"",f);break;case "pinterest":window.open("http://www.pinterest.com/pin/create/button/?url="+e+"&media="+c.url+"&description="+encodeURI(c.title),"",f)}}}this.appName=a;a=document.createElement("div");a.className="gmAlbumsListMasonryItemShare";a.style.backgroundColor=g(d(this.appName).sliderInfoBoxBgColor,d(this.appName).sliderInfoBoxBgAlpha);if(!l()||l()&&M){var k=document.createElement("div");k.className="gmInfoBarCloseButton";k.innerHTML='<svg height="512px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';
k.childNodes[0].style.fill=g(d(this.appName).sliderInfoBoxTitleTextColor,1);k.addEventListener("click",function(){b.prepareToRemove()},!1);a.appendChild(k)}var h='<p class="gmItemTitle" style="color: '+g(d(this.appName).sliderInfoBoxTitleTextColor,1)+'">Share<br>';(h=c.title&&""!=c.title?h+('<span class="gmItemDescription" style="color: '+g(d(this.appName).sliderInfoBoxTextColor,1)+'">'+c.title+"</span></p>"):h+"</p>")&&""!=h&&(k=document.createElement("div"),k.className="gmDescriptionWrap",k.style.float=
"none",k.innerHTML=h,a.appendChild(k));k=document.createElement("div");k.className="gmDescriptionWrap";k.style.float="none";k.style.padding="0px 20px";a.appendChild(k);var F=!1;h=document.createElement("div");h.setAttribute("type","facebook");h.className="gmItemShareButtonWrap";var m=document.createElement("div");m.className="gmItemShareButton";m.innerHTML='<svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M27.6 3h-23.2c-.8 0-1.4.6-1.4 1.4v23.1c0 .9.6 1.5 1.4 1.5h12.5v-10.1h-3.4v-3.9h3.4v-2.9c0-3.4 2.1-5.2 5-5.2 1.4 0 2.7.1 3 .2v3.5h-2.1c-1.6 0-1.9.8-1.9 1.9v2.5h3.9l-.5 3.9h-3.4v10.1h6.6c.8 0 1.4-.6 1.4-1.4v-23.2c.1-.8-.5-1.4-1.3-1.4z"></path></svg><div class="gmSH_title" style="color: #3b5998">Facebook</div>';
m.getElementsByTagName("svg")[0].style.fill="#3b5998";h.appendChild(m);h.addEventListener("mouseup",f,!1);l()&&h.addEventListener("touchend",f,!1);k.appendChild(h);h=document.createElement("div");h.setAttribute("type","twitter");h.className="gmItemShareButtonWrap";m=document.createElement("div");m.className="gmItemShareButton";m.innerHTML='<svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M30 7.3c-1 .5-2.1.8-3.3.9 1.2-.7 2.1-1.8 2.5-3.2-1.1.7-2.3 1.1-3.6 1.4-1-1.1-2.5-1.8-4.2-1.8-3.2 0-5.7 2.6-5.7 5.7 0 .5.1.9.1 1.3-4.8-.2-9-2.5-11.8-6-.5.9-.8 1.9-.8 3 0 2 1 3.8 2.6 4.8-.9 0-1.8-.3-2.6-.7v.1c0 2.8 2 5.1 4.6 5.6-.5.1-1 .2-1.5.2-.4 0-.7 0-1.1-.1.7 2.3 2.9 3.9 5.4 4-2 1.5-4.4 2.5-7.1 2.5-.5 0-.9 0-1.4-.1 2.5 1.6 5.6 2.6 8.8 2.6 10.6 0 16.3-8.8 16.3-16.3v-.7c1.1-1 2-2 2.8-3.2z"></path></svg><div class="gmSH_title" style="color: #00aced">Twitter</div>';
m.getElementsByTagName("svg")[0].style.fill="#00aced";h.appendChild(m);h.addEventListener("mouseup",f,!1);l()&&h.addEventListener("touchend",f,!1);k.appendChild(h);h=document.createElement("div");h.setAttribute("type","pinterest");h.className="gmItemShareButtonWrap";m=document.createElement("div");m.className="gmItemShareButton";m.innerHTML='<svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M16 3c-7.2 0-13 5.8-13 13 0 5.5 3.4 10.2 8.3 12.1-.1-1-.2-2.6 0-3.7.2-1 1.5-6.5 1.5-6.5s-.4-.8-.4-1.9c0-1.8 1-3.2 2.4-3.2 1.1 0 1.6.8 1.6 1.8 0 1.1-.7 2.8-1.1 4.3-.3 1.3.6 2.3 1.9 2.3 2.3 0 4.1-2.4 4.1-6 0-3.1-2.2-5.3-5.4-5.3-3.7 0-5.9 2.8-5.9 5.6 0 1.1.4 2.3 1 3 .1.1.1.2.1.4-.1.4-.3 1.3-.4 1.5-.1.2-.2.3-.4.2-1.6-.8-2.6-3.1-2.6-5 0-4.1 3-7.9 8.6-7.9 4.5 0 8 3.2 8 7.5 0 4.5-2.8 8.1-6.7 8.1-1.3 0-2.6-.7-3-1.5 0 0-.7 2.5-.8 3.1-.3 1.1-1.1 2.5-1.6 3.4 1.2.4 2.5.6 3.8.6 7.2 0 13-5.8 13-13 0-7.1-5.8-12.9-13-12.9z"></path></svg><div class="gmSH_title" style="color: #cc2127">Pinterest</div>';
m.getElementsByTagName("svg")[0].style.fill="#cc2127";h.appendChild(m);h.addEventListener("mouseup",f,!1);l()&&h.addEventListener("touchend",f,!1);k.appendChild(h);h=document.createElement("div");h.setAttribute("type","google");h.className="gmItemShareButtonWrap";m=document.createElement("div");m.className="gmItemShareButton";m.innerHTML='<svg enable-background="new 0 0 56.693 56.693" height="56.693px" id="Layer_1" version="1.1" viewBox="0 0 56.693 56.693" width="56.693px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M52.218,25.852h-7.512v-7.51c0-0.573-0.465-1.039-1.037-1.039H41.53c-0.576,0-1.041,0.466-1.041,1.039v7.51h-7.512   c-0.572,0-1.039,0.467-1.039,1.041v2.139c0,0.574,0.467,1.039,1.039,1.039h7.512v7.514c0,0.574,0.465,1.039,1.041,1.039h2.139   c0.572,0,1.037-0.465,1.037-1.039V30.07h7.512c0.572,0,1.039-0.465,1.039-1.039v-2.139C53.257,26.318,52.79,25.852,52.218,25.852z"/><path d="M26.974,32.438c-1.58-1.119-3.016-2.76-3.041-3.264c0-0.918,0.082-1.357,2.141-2.961c2.662-2.084,4.128-4.824,4.128-7.719   c0-2.625-0.802-4.957-2.167-6.595h1.059c0.219,0,0.434-0.068,0.609-0.196l2.955-2.141c0.367-0.263,0.521-0.732,0.381-1.161   c-0.141-0.428-0.537-0.72-0.988-0.72H18.835c-1.446,0-2.915,0.255-4.357,0.751c-4.816,1.661-8.184,5.765-8.184,9.978   c0,5.969,4.624,10.493,10.805,10.635c-0.121,0.473-0.182,0.939-0.182,1.396c0,0.92,0.233,1.791,0.713,2.633c-0.056,0-0.11,0-0.17,0   c-5.892,0-11.21,2.891-13.229,7.193c-0.526,1.119-0.794,2.25-0.794,3.367c0,1.086,0.279,2.131,0.826,3.113   c1.269,2.27,3.994,4.031,7.677,4.961c1.901,0.48,3.944,0.725,6.065,0.725c1.906,0,3.723-0.246,5.403-0.732   c5.238-1.521,8.625-5.377,8.625-9.828C32.032,37.602,30.659,35.045,26.974,32.438z M10.283,42.215c0-3.107,3.947-5.832,8.446-5.832   h0.121c0.979,0.012,1.934,0.156,2.834,0.432c0.309,0.213,0.607,0.416,0.893,0.611c2.084,1.42,3.461,2.357,3.844,3.861   c0.09,0.379,0.135,0.758,0.135,1.125c0,3.869-2.885,5.83-8.578,5.83C13.663,48.242,10.283,45.596,10.283,42.215z M14.377,12.858   c0.703-0.803,1.624-1.227,2.658-1.227l0.117,0.002c2.921,0.086,5.716,3.341,6.23,7.256c0.289,2.192-0.199,4.253-1.301,5.509   c-0.705,0.805-1.613,1.229-2.689,1.229c0,0,0,0-0.002,0h-0.047c-2.861-0.088-5.716-3.467-6.227-7.377   C12.829,16.064,13.289,14.099,14.377,12.858z"/></g></svg><div class="gmSH_title" style="color: #d64a2d">Google+</div>';
m.getElementsByTagName("svg")[0].style.fill="#d64a2d";h.appendChild(m);h.addEventListener("mouseup",f,!1);l()&&h.addEventListener("touchend",f,!1);k.appendChild(h);h=document.createElement("div");h.setAttribute("type","copy");h.className="gmItemShareButtonWrap";h.style.width="100%";m=document.createElement("div");m.className="gmItemCopyLink";m.innerHTML='<svg height="1792" viewBox="0 0 1792 1792" width="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z"/></svg><div id="gmSH_title_copy" class="gmSH_title" style="color: #7d7d7d">'+
e+"</div>";m.getElementsByTagName("svg")[0].style.fill="#7d7d7d";h.appendChild(m);h.addEventListener("mouseup",f,!1);l()&&h.addEventListener("touchend",f,!1);k.appendChild(h);a.appendChild(k);return a}function N(a){var b=this;this.type=void 0;this.delegate=a;this.view=document.createElement("div");this.view.className="gmAlbumsListMasonryModal";this.closeButton=document.createElement("div");this.closeButton.style.position="absolute";this.closeButton.style.zIndex=-100;this.closeButton.className="gmModalCloseButton";
this.closeButton.style.width="100%";this.closeButton.style.height="100%";this.closeButton.style.backgroundColor="black";this.closeButton.style.willChange="opacity";this.closeButton.style.opacity="0.8";this.closeButton.addEventListener("click",function(a){b.prepareToRemove(a)},!1);this.view.appendChild(this.closeButton);a=document.createElement("div");a.className="gmflexe";this.view.appendChild(a);this.scrollView=void 0;this.dragging=!1;this._scrollViewTranslateY=0;this.startDragHandler=void 0;this.viewCompleted=
!1;this.addToStage()}function ba(a){var b=this;this.item=void 0;this.delegate=a;this.appName=a.appName;this.view=document.createElement("div");this.view.className="gmAlbumsListMasonryItemPage";this.audioCover=void 0;this.maxScale=2;this.size=new t(0,0);this.imgSize=new t(0,0);this.maxYoffset=this.maxXoffset=this.height=this.width=0;this._fitMode=!0;this._scale=1;this.startDistForZoom=this.focusGlobalPoint=this.startGlobalPoint=this.startScale=this.newScaleMW=this.newScale=this.fitScale=void 0;this.newPosition=
new p(0,0);this._imageTranslate=new p(0,0);this.startTranslate=new p(0,0);this.isBlockDragingMem=this.isBlockDraging=this.draging=this.zooming=!1;this.animaSliderRender=void 0;this.newY=this.oldY=this.newX=this.oldX=this.speedY=this.speedX=0;this.itemImgComplete=!1;this.itemImg=new Image;this.itemImg.style.maxWidth="none";this.itemImg.style.setProperty("max-width","none","!important");this.itemImg.style.transformOrigin="0 0";this.itemImg.style.opacity=0;this.itemImg.onload=function(a){b.thumbLoad(a)};
this.view.appendChild(this.itemImg)}function ca(a){this.delegate=a;this.appName=a.appName;this.pageNum=void 0;this.view=document.createElement("div");this.view.className="gmAlbumsListMasonrySliderPage";this.preloader=L(g(d(this.appName).sliderPreloaderColor,.7));d(this.appName).key||(a=d(this.appName).tv.cloneNode(!0),a.style.left="50%",a.style.top="50%",a.style.transform="translateX(-50%) translateY(-50%)",a.style.transform="translateX(-50%) translateY(-50%)",a.style.zIndex="999999",this.bj=a)}function da(a,
b,c){this.delegate=a;this.term=b;this.appName=this.delegate.appName;this.id=b.term_id+"_"+this.appName+"sliderAView_";this.visibleBounds=new J(0,0,0,0);this.needHideControlls=this.isControllsShow=!1;this.firsrTap=void 0;this.statusRemove=!1;this.view=document.createElement("div");this.view.className="gmAlbumsListMasonryColectionSlider";B.desktop||(this.view.style.height="100%");this.view.id=this.id+"main";this.resizeDelay=void 0;a=document.createElement("div");a.className="gmSliderBg";a.style.backgroundColor=
g(d(this.appName).sliderBgColor,1);this.background=a;this.view.appendChild(a);this.sliderPages=[];this.zoomingDrag=this.dragging=!1;this._scrollViewTranslateY=this._scrollViewTranslateX=this.speedY=this.speedX=0;this.startDragHandler=void 0;this.currentPageIndex=c&&0!==c?0:void 0;this.startItemIndex=c?c:0;this.items=[];this.pageAmount=0;this.pages=[];this.zoomingPageNum=this.animaSliderRender=this._pageNum=void 0;this.slider=document.createElement("div");this.slider.className="gmAlbumsListMasonrySlidesWrap";
this.view.appendChild(this.slider);this.footer=document.createElement("div");this.footer.className="gmAlbumsListMasonrySlidesFooter";this.footer.style.backgroundImage="linear-gradient(180deg,"+g(d(this.appName).sliderBgColor,0)+","+g(d(this.appName).sliderBgColor,1)+")";this.view.appendChild(this.footer);this.header=document.createElement("div");this.header.className="gmAlbumsListMasonrySlidesHeader";this.header.style.backgroundImage="linear-gradient(0deg,"+g(d(this.appName).sliderBgColor,0)+","+
g(d(this.appName).sliderBgColor,1)+")";A&&this.header.classList.add("gmAlbumsListMasonrySlidesHeaderMiniScreen");this.view.appendChild(this.header);this.createControlls();this.addToStage()}function ea(a){function b(a){"like"==a.getAttribute("type")&&a.getAttribute("like")||("bookmark"==a.getAttribute("type")&&a.getAttribute("bookmark")?a.style.backgroundColor=f.backgroundColor:(a.style.backgroundColor=f.backgroundColor,a.childNodes[0].style.fill=f.iconColor))}function c(a){"bookmark"==a.getAttribute("type")&&
a.getAttribute("bookmark")?a.style.backgroundColor=f.backgroundColorOver:(a.style.backgroundColor=f.backgroundColorOver,a.childNodes[0].style.fill=f.iconColorOver)}function e(a){var e=this;if("click"==a.type){if(l()&&(c(e),setTimeout(function(){b(e)},200)),a=f.item)switch(this.getAttribute("type")){case "link":a.link&&window.open(a.link,"_blank");break;case "like":b(this);f.delegate.likeItem=f.index;this.setAttribute("like",f.item.ID);this.style.cursor="default";this.style.pointerEvents="none";this.getElementsByTagName("svg")[0].style.fill=
"red";break;case "bookmark":b(this),f.delegate.bookmarkItem(f.index)?(this.setAttribute("bookmark",f.item.ID),this.getElementsByTagName("svg")[0].style.fill="red"):(this.removeAttribute("bookmark"),this.getElementsByTagName("svg")[0].style.fill=f.iconColor)}}else"mouseenter"==a.type?c(this):"mouseleave"==a.type&&b(this)}var f=this;this.delegate=a;this.appName=a.appName;this.index=this.item=void 0;this.view=document.createElement("div");this.view.className="gmAlbumsListMasonryCollectionItemInfoMenu";
this.backgroundColor=g("#000000",0);this.backgroundColorOver=g("#000000",0);this.iconColor=g(d(this.appName).collectionThumbSubMenuIconColor,1);this.iconColorOver=g(d(this.appName).collectionThumbSubMenuIconColor,.5);a=void 0;a=document.createElement("div");a.className="itemsButtons";a.setAttribute("type","link");a.innerHTML='<svg height="1792" viewBox="0 0 1792 1792" width="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z"/></svg>';
a.style.backgroundColor=this.backgroundColor;a.childNodes[0].style.fill=this.iconColor;this.linkButton=a;a.addEventListener("click",e,!1);a.addEventListener("mouseenter",e,!1);a.addEventListener("mouseleave",e,!1);this.view.appendChild(a);d(this.appName).sliderLikesEnabled&&(a=document.createElement("div"),a.className="itemsButtons",a.setAttribute("type","like"),a.innerHTML='<svg enable-background="new 0 0 51 46" height="46px" id="Layer_1" version="1.1" viewBox="0 0 51 46" width="51px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M46.188,4.101c-5.529-5.53-14.495-5.53-20.023,0L25.39,4.875l-0.996-0.774c-5.529-5.53-14.715-5.53-20.245,0  C-1.38,9.63-1.27,18.595,4.26,24.125l18.753,18.643c0.671,0.671,1.4,1.258,2.376,1.766c0.76-0.508,1.483-1.095,2.155-1.766  l18.643-18.643C51.717,18.595,51.717,9.63,46.188,4.101z""/></svg>',
a.style.backgroundColor=this.backgroundColor,a.childNodes[0].style.fill=this.iconColor,this.likeButton=a,a.addEventListener("click",e,!1),a.addEventListener("mouseenter",e,!1),a.addEventListener("mouseleave",e,!1),this.view.appendChild(a));d(this.appName).sliderBookmarksEnabled&&(a=document.createElement("div"),a.className="itemsButtons",a.setAttribute("type","bookmark"),a.innerHTML='<svg height="1792" viewBox="0 0 1792 1792" width="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1420 128q23 0 44 9 33 13 52.5 41t19.5 62v1289q0 34-19.5 62t-52.5 41q-19 8-44 8-48 0-83-32l-441-424-441 424q-36 33-83 33-23 0-44-9-33-13-52.5-41t-19.5-62v-1289q0-34 19.5-62t52.5-41q21-9 44-9h1048z"/></svg>',
a.style.backgroundColor=this.backgroundColor,a.childNodes[0].style.fill=this.iconColor,this.bookMarkButton=a,a.addEventListener("click",e,!1),a.addEventListener("mouseenter",e,!1),a.addEventListener("mouseleave",e,!1),this.view.appendChild(a))}function fa(a,b,c){var e=this;this.delegate=a;this.appName=a.appName;this.item=b;this.type=C(this.item.mime_type);this.index=c;this.view=document.createElement("div");this.view.className="gmCollectionItem";this.view.style.padding=d(this.appName).collectionThumbInPadding+
"px";this.view.setAttribute("gmIndex",c);this.itemViewSrc=!1;this.img=new Image;this.img.style.width="100%";this.img.style.border="0";this.img.style.setProperty("width","100%","!important");this.img.style.height="auto";this.isTouchend=!1;this.img.onload=function(){this.setAttribute("alt",e.item.title);this.style.opacity=1;"audio"!=e.type&&1.1<e.view.clientWidth/this.naturalWidth&&!e.itemViewSrc&&(this.src=e.item.itemViewSrc,e.itemViewSrc=!0)};this.view.appendChild(this.img);this.img.src=b.itemViewThumbSrc;
this.hover=document.createElement("div");this.hover.className="gmItemHover";this.hover.style.top=this.hover.style.bottom=this.hover.style.left=this.hover.style.right=d(this.appName).collectionThumbInPadding+"px";this.hover.style.backgroundImage="linear-gradient(180deg,"+g(d(this.appName).collectionthumbHoverBgColor,d(this.appName).collectionthumbHoverBgAlpha)+" 0, transparent 40%, transparent 60%,"+g(d(this.appName).collectionthumbHoverBgColor,d(this.appName).collectionthumbHoverBgAlpha)+")";this.view.addEventListener("touchend",
function(a){e.mouseHandler(a)},!1);this.view.addEventListener("touchstart",function(a){e.mouseHandler(a)},!1);this.hover.addEventListener("click",function(a){e.mouseHandler(a)},!1);this.view.appendChild(this.hover);this.view.addEventListener("mouseenter",function(a){e.mouseHandler(a)},!1);this.view.addEventListener("mouseleave",function(a){e.mouseHandler(a)},!1);d(this.appName).collectionThumbSubMenuVisibility&&(this.infoWraperTop=document.createElement("div"),this.infoWraperTop.className="gmItemInfoWrapTop",
this.infoWraperTop.style.top=d(this.appName).collectionThumbInPadding+5+"px",this.infoWraperTop.style.right=d(this.appName).collectionThumbInPadding+10+"px");d(this.appName).collectionThumbTitleEnable&&(this.infoWraperBottom=document.createElement("div"),this.infoWraperBottom.className="gmItemInfoWrapBottom",this.infoWraperBottom.style.color=g(d(this.appName).collectionthumbHoverTitleTextColor,1),this.infoWraperBottom.style.fontSize=d(this.appName).collectionthumbHoverTitleFontSize+"px",this.infoWraperBottom.innerHTML=
b.title,this.infoWraperBottom.style.bottom=d(this.appName).collectionThumbInPadding+5+"px",this.infoWraperBottom.style.left=this.infoWraperBottom.style.right=d(this.appName).collectionThumbInPadding+10+"px",this.hover.appendChild(this.infoWraperBottom));d(this.appName).collectionThumbSubMenuVisibility&&(this.infoBarTop=this.delegate.itemInfoBar)}function ha(a,b){var c=this;this.delegate=a;this.term=b;this.appName=this.delegate.appName;this.id=b.term_id+"_"+this.appName+"collectionView_";this.view=
document.createElement("div");this.view.className="gmAlbumsListMasonryColection";this.view.id=this.id+"main";this.resizeTimeOut=void 0;this.view.style.backgroundColor="white";this.thumbsList=[];this.columnsArr=[];this.touchendHandler=this.scrollHandler=void 0;this.isShowFixedHeder=!1;this.fixedHeader=void 0;a=document.createElement("div");a.className="gmCollectionBg";this.background=a;this.background.style.backgroundColor=g(d(this.appName).collectionBgColor,1);this.background.addEventListener("mouseover",
function(){c.itemLeave&&c.itemLeave.removeHover()},!1);this.background.addEventListener("click",function(){c.prepareToRemove()},!1);this.view.appendChild(a);this.scrollViewHeight=0;this.scrollView=document.createElement("div");this.scrollView.className="gmCollectionScrollView";this.scrollView.style.padding=d(this.appName).collectionThumbInPadding+"px";this.itemInfoBar=new ea(this.delegate);this.itemLeave=void 0;this.addToStage()}function R(a){var b=this;this.termData=a;this.id=this.termData.term_id;
this.appName=this.termData.appName;this._frame=new J(0,0,0,0);this.view=document.createElement("div");this.view.className="gmAlbumsListMasonryCover";this.view.style.marginTop=d(this.appName).spaceX+"px";this.view.style.marginLeft=d(this.appName).spaceX+"px";this.view.id=this.termData.key+"_"+this.termData.listIndex;this.mouseRender=void 0;this.rotationTransformY=this.rotationTransformX=0;this.render=void 0;this.shareClick=!1;this.coumnter=this.title=this.coverImgSize=this.coverSrc=this.thumbImg=void 0;
"gmedia_tag"!=this.termData.taxonomy&&this.termData.meta&&this.termData.meta.cover&&(this.imgHolder=document.createElement("div"),this.imgHolder.className="gmAlbumsListMasonryCoverImgHolder",a=this.termData.meta.cover,this.coverSrc=[],this.coverSrc[0]=a.itemViewThumbSrc,this.coverSrc[1]=a.itemViewSrc,this.thumbImg=new Image,B.ios&&this.thumbImg.classList.add("gmiOS_optima"),this.thumbImg.style.maxWidth="none",this.thumbImg.style.maxHeight="none",this.thumbImg.style.border="none",this.thumbImg.style.position=
"absolute",this.thumbImg.style.setProperty("max-width","none","!important"),this.thumbImg.style.setProperty("max-height","none","!important"),this.thumbImg.onload=function(a){b.thumbLoad(a)},this.imgHolder.appendChild(this.thumbImg),B.ios&&this.imgHolder.classList.add("gmiOS_optima"),this.view.appendChild(this.imgHolder),this.view.style.backgroundImage="linear-gradient(45deg, "+g(d(this.appName).coverTitleBgColor1,d(this.appName).coverTitleBgAlpha)+","+g(d(this.appName).coverTitleBgColor2,d(this.appName).coverTitleBgAlpha)+
")",this.imgHolder||(c.style.opacity="1"));a=document.createElement("div");a.className="gmAlbumsListMasonryCoverHA";B.ios&&a.classList.add("gmiOS_optima");var c=document.createElement("div");c.className="gmAlbumsListMasonryHoverBG";B.ios&&c.classList.add("gmiOS_optima");c.style.backgroundImage="linear-gradient(45deg, "+g(d(this.appName).coverTitleBgColor1,d(this.appName).coverTitleBgAlpha)+","+g(d(this.appName).coverTitleBgColor2,d(this.appName).coverTitleBgAlpha)+")";this.imgHolder||(c.style.opacity=
"1");this.hoverBG=c;a.appendChild(c);this.hoverArea=a;this.view.appendChild(a);c=document.createElement("div");c.className="gmAlbumsListMasonryCoverTitleHolder";this.hoverArea.appendChild(c);a=this.termData.name;if("myCollection"==this.termData.key||d(this.appName).coverTitleEnable){var e=document.createElement("div");e.className="coverTitle";e.style.fontSize=d(this.appName).coverTitleFontSize+"px";e.style.color=g(d(this.appName).coverTitleTextColor,1);e.innerHTML=a;this.title=e;c.appendChild(e)}d(this.appName).coverCollectoinAmount&&
(a=document.createElement("div"),a.className="coverCounter",a.style.color=g(d(this.appName).coverTitleTextColor,1),a.style.fontSize=d(this.appName).coverTitleFontSize/2+"px",a.innerHTML="- "+this.termData.count+" -",this.coumnter=a,c.appendChild(a));if("myCollection"==this.termData.key||d(this.appName).coverSocialShareEnabled){var f=document.createElement("div");f.className="coverShareButton";f.innerHTML='<svg height="1792" viewBox="0 0 1792 1792" width="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1344 1024q133 0 226.5 93.5t93.5 226.5-93.5 226.5-226.5 93.5-226.5-93.5-93.5-226.5q0-12 2-34l-360-180q-92 86-218 86-133 0-226.5-93.5t-93.5-226.5 93.5-226.5 226.5-93.5q126 0 218 86l360-180q-2-22-2-34 0-133 93.5-226.5t226.5-93.5 226.5 93.5 93.5 226.5-93.5 226.5-226.5 93.5q-126 0-218-86l-360 180q2 22 2 34t-2 34l360 180q92-86 218-86z"/></svg>';
f.getElementsByTagName("svg")[0].style.fill=g(d(this.appName).coverTitleTextColor,1);f.addEventListener("mouseenter",function(){f.getElementsByTagName("svg")[0].style.fill=g(d(b.appName).coverTitleBgColor1,1)},!1);f.addEventListener("mouseleave",function(){f.getElementsByTagName("svg")[0].style.fill=g(d(b.appName).coverTitleTextColor,1);b.shareClick=!1},!1);f.addEventListener("mouseup",function(a){b.shareClick=!0;l()&&(f.getElementsByTagName("svg")[0].style.fill=g(d(b.appName).coverTitleTextColor,
1))},!0);c.appendChild(f)}this.animationDelay=void 0;this.render=this.startRender();B.ios||this.view.addEventListener("mouseenter",this.render,!1)}function ia(a){this.delegate=a;this.appName=a.appName;this.id=a.appName+"_module_view";this.view=document.createElement("div");this.view.className="gmAlbumsListMasonry_GridCollections";this.view.id=this.id;this.covers=[];this.appDiv=a.appDiv;d(this.appName).appEventManager.addGMEventListener(r.startLoading,this,"loadingStatusHandler");d(this.appName).appEventManager.addGMEventListener(r.termsLoadingComplete,
this,"appHandler");d(this.appName).appEventManager.addGMEventListener(r.termsUpdated,this,"updateCoversCollection");this.viewWidth=0;this.gmediaTemplate=void 0;a=document.getElementsByTagName("body")[0];for(var b=0;b<a.classList.length;b++)"gmedia-template"==a.classList[b]&&(this.gmediaTemplate=!0,b=a.classList.length)}function S(a,b,c){K(a,this);this.appName=c;this.idPrefix=void 0;b&&(this.collectionName=b,this.idPrefix=c+"_"+b+"_")}function D(a,b,c){K(a,this);this.appName=c;this.key=this.listIndex=
void 0;this.collectionName=b;this.meta&&(this.meta=new ja(this.meta,this.collectionName,this.appName));"gmedia_tag"==this.taxonomy&&(this.name="#"+this.name);"myCollection"==this.taxonomy&&this._query&&(this.sharelink=d(c).post_url+"/?"+d(c).galleryID+"[gmedia__in]="+this._query.gmedia__in)}function ja(a,b,c){K(a,this);this.collectionName=b;this.appName=c;this._cover&&(this._cover=new S(a._cover,this.collectionName,this.appName))}function ka(a,b,c){K(a,this);if(this.appApi&&(this.appName=b,a=this.settings,
d(this.appName).appApi=this.appApi,d(this.appName).post_url=a.post_url,d(this.appName).galleryID="gm"+c.getAttribute("data-gmid"),this.appDiv=c,d(this.appName).appEventManager=new q,this.audioPlayer=void 0,a&&(d(this.appName).splashPreloaderColor="#"+a.splashPreloaderColor,d(this.appName).columns=parseInt(a.columns),d(this.appName).thumbRecommendedSize=parseInt(a.thumbRecommendedSize),d(this.appName).coverThumbRatio=parseFloat(a.coverThumbRatio),d(this.appName).spaceX=parseInt(a.spaceX),d(this.appName).coverTitleForBookmark=
a.coverTitleForBookmark,d(this.appName).coverTitleForPreferred=a.coverTitleForPreferred,d(this.appName).coverTitleEnable="1"==a.coverTitleEnable?!0:!1,d(this.appName).coverHoverEffectEnable="1"==a.coverHoverEffectEnable?!0:!1,d(this.appName).coverTitleFontSize=parseInt(a.coverTitleFontSize),d(this.appName).coverTitleTextColor="#"+a.coverTitleTextColor,d(this.appName).coverCollectoinAmount="1"==a.coverCollectoinAmount?!0:!1,d(this.appName).coverSocialShareEnabled="1"==a.coverSocialShareEnabled?!0:
!1,d(this.appName).coverTitleBgAlpha=parseInt(a.coverTitleBgAlpha)/100,d(this.appName).coverTitleBgColor1="#"+a.coverTitleBgColor1,d(this.appName).coverTitleBgColor2="#"+a.coverTitleBgColor2,d(this.appName).collectionPreloaderColor="#"+a.collectionPreloaderColor,d(this.appName).collectionBgColor="#"+a.collectionBgColor,d(this.appName).collectionHeaderBgColor="#"+a.collectionHeaderBgColor,d(this.appName).collectionHeaderTextColor="#"+a.collectionHeaderTextColor,d(this.appName).collectionHeaderControllIconColor=
"#"+a.collectionHeaderControllIconColor,d(this.appName).collectionHeaderControllBgColor="#"+a.collectionHeaderControllBgColor,d(this.appName).collectionThumbRecomendedWidth=parseInt(a.collectionThumbRecomendedWidth),d(this.appName).collectionThumbInPadding=Math.round(parseInt(a.collectionThumbInPadding)/2),d(this.appName).collectionThumbTitleEnable="1"==a.collectionThumbTitleEnable?!0:!1,d(this.appName).collectionthumbHoverTitleFontSize=parseInt(a.collectionthumbHoverTitleFontSize),d(this.appName).collectionthumbHoverTitleTextColor=
"#"+a.collectionthumbHoverTitleTextColor,d(this.appName).collectionThumbSubMenuVisibility="1"==a.collectionThumbSubMenuVisibility?!0:!1,d(this.appName).collectionThumbSubMenuIconColor="#"+a.collectionThumbSubMenuIconColor,d(this.appName).collectionthumbHoverBgColor="#"+a.collectionthumbHoverBgColor,d(this.appName).collectionthumbHoverBgAlpha=parseInt(a.collectionthumbHoverBgAlpha)/100,d(this.appName).sliderPreloaderColor="#"+a.sliderPreloaderColor,d(this.appName).sliderBgColor="#"+a.sliderBgColor,
d(this.appName).sliderNavigationColor="#"+a.sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity=parseInt(a.sliderNavigationColorOpacity)/100,d(this.appName).sliderNavigationIconColor="#"+a.sliderNavigationIconColor,d(this.appName).sliderItemTitleFontSize=parseInt(a.sliderItemTitleFontSize),d(this.appName).sliderItemTitleTextColor="#"+a.sliderItemTitleTextColor,d(this.appName).sliderThumbBarEnable="1"==a.sliderThumbBarEnable?!0:!1,d(this.appName).sliderInfoEnable="1"==a.sliderInfoEnable?
!0:!1,d(this.appName).sliderBookmarksEnabled="1"==a.sliderBookmarksEnabled?!0:!1,d(this.appName).sliderItemDownload="1"==a.sliderItemDownload?!0:!1,d(this.appName).sliderItemDiscuss="1"==a.sliderItemDiscuss?!0:!1,d(this.appName).sliderSocialShareEnabled="1"==a.sliderSocialShareEnabled?!0:!1,d(this.appName).sliderLikesEnabled="1"==a.sliderLikesEnabled?!0:!1,d(this.appName).sliderInfoBoxBgColor="#"+a.sliderInfoBoxBgColor,d(this.appName).sliderInfoBoxBgAlpha=parseInt(a.sliderInfoBoxBgAlpha)/100,d(this.appName).sliderInfoBoxTextColor=
"#"+a.sliderInfoBoxTextColor,d(this.appName).sliderInfoBoxTitleTextColor="#"+a.sliderInfoBoxTitleTextColor,d(this.appName).pagination=!1,d(this.appName).pagination_button_text="Load more",d(this.appName).imagesPperPage=10,d(this.appName).customCSS=a.customCSS),d(b))){this.currentLocation=[];this.appDiv.style.position="relative";this.appDiv.style.height="auto";this.mainViewController=new ia(this);this.appDiv.appendChild(this.mainViewController.view);this.appDivWidth=this.appDiv.clientWidth;this.terms=
{};this.collections={};this.collectionIndex=0;this.lastViewedItemIndex=this.activTerm=this.collection=this.slider=this.cureantCollection=void 0;this.viewsSet={};this.likesSet={};window.localStorage.getItem("gm_likesSet")&&(this.likesSet=JSON.parse(window.localStorage.getItem("gm_likesSet")));this.terms.myCollection={};this.terms.myCollection.itemsList=[];this.bookmarkSet=[];window.localStorage.getItem("gm_bookmarkSet")&&(this.bookmarkSet=JSON.parse(window.localStorage.getItem("gm_bookmarkSet")));
0<this.bookmarkSet.length&&(b=D.termDataByQueryNameId({orderby:"gmedia__in",order:"ASC",gmedia__in:this.bookmarkSet.toString()},d(this.appName).coverTitleForBookmark,"mybookmarks"),b=new D(b,null,this.appName),b.key="myCollection",b.listIndex=0,this.terms.myCollection.itemsList.splice(0,0,b));var e=this;window.addEventListener("resize",function(){e.windowResizeHandler(e)});this.createAudioPlayer();this.appQuery&&(this.appQuery.gmedia__in?(b={},K(this.appQuery,b),b.album__in&&delete b.album__in,b.category__in&&
delete b.category__in,b.tag__in&&delete b.tag__in,c=d(this.appName).coverTitleForPreferred,this.appInfo&&this.appInfo.name&&(c=this.appInfo.name),this.createCollectionByNameAndQuery(c,"gmCustomCollection",b),this.appQuery.album__in||this.appQuery.category__in||this.appQuery.tag__in?(delete this.appQuery.gmedia__in,this.getTermsList(this.appQuery)):d(this.appName).appEventManager.dispatchGMEvent(new n(r.termsLoadingComplete,this,{target:"termsController"}))):this.getTermsList(this.appQuery))}}var z=
v()?{passive:!1,capture:!1}:!1,x=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,y=window.cancelAnimationFrame||window.mozCancelAnimationFrame,B=function(){var a=window,b=a.navigator.userAgent,c={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:a.cordova||a.phonegap,phonegap:a.cordova||a.phonegap},e=b.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),f=b.match(/(Android);?[\s\/]+([\d.]+)?/),
d=b.match(/(iPad).*OS\s([\d_]+)/),h=b.match(/(iPod)(.*OS\s([\d_]+))?/),g=!d&&b.match(/(iPhone\sOS|iOS)\s([\d_]+)/);e&&(c.os="windows",c.osVersion=e[2],c.windows=!0);f&&!e&&(c.os="android",c.osVersion=f[2],c.android=!0,c.androidChrome=0<=b.toLowerCase().indexOf("chrome"));if(d||g||h)c.os="ios",c.ios=!0;g&&!h&&(c.osVersion=g[2].replace(/_/g,"."),c.iphone=!0);d&&(c.osVersion=d[2].replace(/_/g,"."),c.ipad=!0);h&&(c.osVersion=h[3]?h[3].replace(/_/g,"."):null,c.iphone=!0);c.ios&&c.osVersion&&0<=b.indexOf("Version/")&&
"10"===c.osVersion.split(".")[0]&&(c.osVersion=b.toLowerCase().split("version/")[1].split(" ")[0]);c.desktop=!(c.os||c.android||c.webView);c.webView=(g||d||h)&&b.match(/.*AppleWebKit(?!.*Safari)/i);c.os&&"ios"===c.os&&(b=c.osVersion.split("."),e=document.querySelector('meta[name="viewport"]'),c.minimalUi=!c.webView&&(h||g)&&(7===1*b[0]?1<=1*b[1]:7<1*b[0])&&e&&0<=e.getAttribute("content").indexOf("minimal-ui"));c.pixelRatio=a.devicePixelRatio||1;return c}();q.prototype={addGMEventListener:function(a,
b,c){this._listenerSet[a]||(this._listenerSet[a]=[]);this._listenerSet[a].push({listener:b,handler:c})},removeGMEventListener:function(a,b,c){if(this._listenerSet[a])for(var e=0;e<this._listenerSet[a].length;e++)this._listenerSet[a][e].listener==b&&this._listenerSet[a][e].handler==c&&(this._listenerSet[a].splice(e,1),e=this._listenerSet[a].length)},dispatchGMEvent:function(a){if(this._listenerSet[a.type])for(var b=this._listenerSet[a.type],c=0;c<b.length;c++){var e=b[c];if(e&&e.listener&&"function"==
typeof e.listener[e.handler])e.listener[e.handler](a)}}};var r={startLoading:"START LOADING",termsLoadingComplete:"TERMS LOADING COMPLETE",termColectionLoadingComplete:"TERM COLLECTION LOADING COMPLETE",termsUpdated:"TERMS UPDATED"},M=!1,A=!1,la=function(){var a=document.createElement("div");a.style.visibility="hidden";a.style.width="100px";a.style.msOverflowStyle="scrollbar";document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width=
"100%";a.appendChild(c);c=c.offsetWidth;a.parentNode.removeChild(a);return b-c};G.prototype={toString:function(){return"matrix("+this.matrix[0][0].toFixed(3)+","+this.matrix[0][1].toFixed(3)+","+this.matrix[1][0].toFixed(3)+","+this.matrix[1][1].toFixed(3)+","+this.matrix[2][0].toFixed(3)+","+this.matrix[2][1].toFixed(3)+")"},multi:function(a){a=a.matrix;if(this.matrix.length==a[0].length){for(var b=new G(0,0,0,0,0,0),c=this.matrix.length,e=0;e<c;e++)for(var f=a[e].length,d=0;d<f;d++){for(var h=0,
g=0;g<c;g++)h+=a[e][g]*this.matrix[g][d];b.matrix[e][d]=h}this.matrix=b.matrix;return this}}};T.prototype={toString:function(){return this.matrix.toString()},set scaleX(a){this._scaleX=a},set scaleY(a){this._scaleY=a},set rotate(a){this._rotate=a},set translateX(a){this._translateX=a},set translateY(a){this._translateY=a},get matrix(){var a=new G(1,0,0,1,this._translateX,this._translateY),b=new G(this._scaleX,0,0,this._scaleY,0,0),c=new G(Math.cos(this._rotate*Math.PI/180),Math.sin(this._rotate*Math.PI/
180),-Math.sin(this._rotate*Math.PI/180),Math.cos(this._rotate*Math.PI/180),0,0);this._matrix.multi(a).multi(b).multi(c);return this._matrix},get transformLM(){return"matrix("+this._scaleX+",0,0,"+this._scaleY+","+this._translateX+","+this._translateY+")"}};P.prototype={toString:function(){return"translate3d("+this.x+"px,"+this.y+"px,"+this.z+"px)"}};Y.prototype={initByItem:function(a){this.imgSRC==a.itemViewThumbSrc?this.delegate.itemsLoaderHandler(this.view.clientWidth):(this.item=a,this.imgSRC=
a.itemViewThumbSrc,this.bgImg.style.backgroundImage="url("+this.imgSRC+")",this.delegate.itemsLoaderHandler(this.view.clientWidth),this.type=C(this.item.mime_type),"audio"==this.type&&(this.hover=document.createElement("div"),this.hover.className="gmAlbumsListMasonryScrollBarItemLink",this.hover.style.backgroundColor=g("#ffffff",.6),this.hover.innerHTML='<svg version="1.1" viewBox="0 0 58 94" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M37.992,0h-8.021v65.358c-4.435-1.706-10.174-1.73-15.835,0.328C3.994,69.377-2.049,78.355,0.638,85.736   c2.688,7.383,13.088,10.374,23.229,6.683c8.614-3.134,14.249-10.082,14.111-16.626l0.014-53.451   c13.986,2.204,14.943,19.884,13.268,24.842c-0.636,1.879,0.484,3.286,2.598,0C68.938,23.726,37.992,13.376,37.992,0z"/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>',
this.view.appendChild(this.hover)))},set musicIdentifireStatus(a){if("audio"==this.type)switch(a){case "play":this.hover.classList.add("rotate");break;case "durationchange":this.hover.classList.add("rotate");break;case "ended":this.hover.classList.remove("rotate");break;case "pause":this.hover.classList.remove("rotate")}},select:function(a){this.selector.style.opacity=a?"1":"0";this._selected=a}};Z.prototype={initItemsList:function(a){function b(a){"touchend"!=a.type&&"mouseup"!=a.type||c.dragging||
(c.delegate.gotoPageByNum(parseInt(this.getAttribute("gmIndex"))),c.startDragHandler&&c.startDragHandler())}var c=this;this.prepare();for(var e=0;e<a.length;e++){var f=new Y(this);this.thumbsList.push(f);l()&&f.view.addEventListener("touchend",b,!1);f.view.addEventListener("mouseup",b,!1);this.scrollView.appendChild(f.view);f.initByItem(a[e]);f.view.setAttribute("gmIndex",e)}},changeAudioStatusForIndex:function(a,b){!this.activAudioIndex&&0!==this.activAudioIndex||a==this.activAudioIndex||(this.thumbsList[this.activAudioIndex].musicIdentifireStatus=
"ended");this.thumbsList[a].musicIdentifireStatus=b.type;this.activAudioIndex=a},itemsLoaderHandler:function(a){this._scrollWidth+=a;this.scrollView.style.width=this._scrollWidth+5+"px";this.updateView()},prepare:function(){this._scrollWidth=0;this.scrollView.style.transform="translateX(0px)";this.scrollView.style.width="0px";this._scrollViewTranslateX=0},resize:function(){this.updateView()},selectThumbByIndex:function(a){var b;(this.activIndex||0===this.activIndex)&&(b=this.thumbsList[this.activIndex])&&
b.select(!1);if(b=this.thumbsList[a]){b.select(!0);var c=b.view.clientWidth*a,e=c+this.scrollViewTranslateX,f=e+b.view.clientWidth;this.scrollView.style.transition="none";if(0>e||0>f)this.scrollView.style.transition="transform .4s",this.scrollViewTranslateX=-c;if(e>this.view.clientWidth||f>this.view.clientWidth)this.scrollView.style.transition="transform .4s",this.scrollViewTranslateX=this.view.clientWidth-b.view.clientWidth-c;this._scrollWidth>this.view.clientWidth&&(this.scrollViewTranslateX=Math.max(this.scrollViewTranslateX,
-(this._scrollWidth-this.view.clientWidth)))}this.activIndex=a},updateView:function(){this.selectThumbByIndex(this.activIndex);1>this.view.clientWidth/this._scrollWidth?this.viewCompleted||(this.scrollView.classList.add("gm_grabbable"),this.startDragHandler=this.startDrag(),l()&&this.scrollView.addEventListener("touchstart",this.startDragHandler,z),this.scrollView.addEventListener("mousedown",this.startDragHandler,!1),this.viewCompleted=!0):(this.scrollView.classList.remove("gm_grabbable"),this.scrollViewTranslateX=
0,this.viewCompleted&&(l()&&this.scrollView.removeEventListener("touchstart",this.startDragHandler,z),this.scrollView.removeEventListener("mousedown",this.startDragHandler,!1),this.viewCompleted=!1))},set scrollViewTranslateX(a){this._scrollViewTranslateX=a;this.scrollView.style.transform="translateX("+a+"px)"},get scrollViewTranslateX(){return this._scrollViewTranslateX},startDrag:function(a){function b(){return-(d._scrollWidth-d.view.clientWidth+d.view.getBoundingClientRect().left)}function c(){m=
0<d.scrollViewTranslateX?.2*m+.1*(0-d.scrollViewTranslateX):d.scrollViewTranslateX<b()?.2*m+.1*(b()-d.scrollViewTranslateX):.95*m;d.scrollViewTranslateX+=m;.04>Math.abs(m)?y(I):I=x(c)}function e(a){a.preventDefault();if(a=h-(a.touches&&a.touches[0]?a.touches[0].pageX:a.pageX))d.dragging=!0;d.scrollViewTranslateX=g-a;p=u;u=d.scrollViewTranslateX;m=u-p}function f(a){a.preventDefault();d.scrollView.style.transition=null;l()&&(document.removeEventListener("touchmove",e,z),document.removeEventListener("touchend",
f,z),document.removeEventListener("touchcancel",f,!1));document.removeEventListener("mousemove",e,!1);document.removeEventListener("mouseup",f,!1);document.removeEventListener("oncontextmenu",f,!1);if(0!=m||0<d.scrollViewTranslateX||d.scrollViewTranslateX<b())I=x(c);d.dragging=!1}var d=this,h=void 0,g=void 0,m=0,p=0,u=0,I=void 0;return function(a){a?(l()||a.preventDefault(),a.button&&0!==a.button||(m=0,u=d.scrollViewTranslateX,h=a.touches&&a.touches[0]?a.touches[0].pageX:a.pageX,g=d.scrollViewTranslateX,
y(I),l()&&(document.addEventListener("touchmove",e,z),document.addEventListener("touchend",f,z),document.addEventListener("touchcancel",f,!1)),document.addEventListener("mousemove",e,!1),document.addEventListener("mouseup",f,!1),document.addEventListener("oncontextmenu",f,!1))):(m=0,g=d.scrollViewTranslateX,y(I))}}};N.prototype={addToStage:function(){var a=this,b=document.getElementsByTagName("body")[0];document.getElementsByTagName("html");this.view.style.zIndex=O(b)+1;b.appendChild(this.view);setTimeout(function(){a.view.style.opacity=
"1"},30)},prepareToRemove:function(a){var b=this;b.view.style.opacity="0";setTimeout(function(){b.view&&b.view.parentNode&&b.view.parentNode.removeChild(b.view);delete b.view;b.delegate.deleteModal()},400)},pushPage:function(a){this.viewCompleted=!1;this.scrollView&&this.scrollView.parentNode&&this.scrollView.parentNode.removeChild(this.scrollView);this.view.appendChild(a);this.scrollView=a;this.updateControlls()},updateControlls:function(){if(this.scrollView&&!this.viewCompleted){this.startDragHandler=
this.startDrag();if(l()){var a=v()?{passive:!1,capture:!1}:!1;this.scrollView.addEventListener("touchstart",this.startDragHandler,a)}this.scrollView.addEventListener("mousedown",this.startDragHandler,!1);this.viewCompleted=!0}},get bottom(){return this.view.clientHeight-this.scrollView.clientHeight-20},set scrollViewTranslateY(a){this._scrollViewTranslateY=a;this.scrollView.style.transform="translateY("+a+"px)";0<a&&(this.closeButton.style.opacity=Math.max(.8-a/200,0))},get scrollViewTranslateY(){return this._scrollViewTranslateY},
startDrag:function(){function a(){g=0<e.scrollViewTranslateY?.2*g+.1*(0-e.scrollViewTranslateY):e.scrollViewTranslateY<e.bottom?.2*g+.1*(e.bottom-e.scrollViewTranslateY):.95*g;e.scrollViewTranslateY+=g;.04>Math.abs(g)?y(u):u=x(a)}function b(a){a.preventDefault();a=a.touches&&a.touches[0]?a.touches[0].pageY:a.pageY;e.dragging=!0;e.scrollViewTranslateY=h-(d-a);m=p;p=e.scrollViewTranslateY;g=p-m}function c(d){d.preventDefault();e.scrollView.style.transition="none";l()&&(document.removeEventListener("touchmove",
b,k),document.removeEventListener("touchend",c,k),document.removeEventListener("touchcancel",c,!1));document.removeEventListener("mousemove",b,!1);document.removeEventListener("mouseup",c,!1);document.removeEventListener("oncontextmenu",c,!1);if(0>=e.bottom){if(e.scrollViewTranslateY<e.bottom-50||50<e.scrollViewTranslateY){e.prepareToRemove();e.dragging=!1;return}}else if(-50>e.scrollViewTranslateY||50<e.scrollViewTranslateY){e.prepareToRemove();e.dragging=!1;return}(0!=g||0<e.scrollViewTranslateY||
e.scrollViewTranslateY<e.bottom)&&e.dragging&&(u=x(a));e.dragging=!1}var e=this,d=void 0,k=v()?{passive:!1,capture:!1}:!1,h=0,g=0,m=0,p=0,u=void 0;return function(a){a?(l()||a.preventDefault(),a.button&&0!==a.button||(g=0,p=e.scrollViewTranslateY,d=a.touches&&a.touches[0]?a.touches[0].pageY:a.pageY,h=e.scrollViewTranslateY,y(u),l()&&(document.addEventListener("touchmove",b,k),document.addEventListener("touchend",c,k),document.addEventListener("touchcancel",c,!1)),document.addEventListener("mousemove",
b,!1),document.addEventListener("mouseup",c,!1),document.addEventListener("oncontextmenu",c,!1))):(g=0,h=e.scrollViewTranslateY,y(u))}}};ba.prototype={initByItem:function(a){this.item=a;this.type=C(this.item.mime_type);this.audioRedy=!1;"audio"==this.type&&(this.playerControls=this.createAudioPlaterControls())},tryToShow:function(){if(this.itemImgComplete)this.resize();else if("audio"==this.type){this.size=new t(this.view.clientWidth,this.view.clientHeight);var a=new t(300,300),b=new t(this.view.clientWidth,
this.view.clientHeight);this.itemImg.style.transformOrigin="center center";this.itemImg.classList.add("gmpAudioCoverContainerAlbumsListMasonry");this.itemImg.setAttribute("src",this.item.itemViewThumbSrc);this.itemImg.style.top=(b.height-a.height)/2+"px";this.itemImg.style.left=(b.width-a.width)/2+"px";this.itemImg.style.width=a.width+"px";this.itemImg.style.height=a.height+"px"}else this.item.itemViewSrc&&this.itemImg.setAttribute("src",this.item.itemViewSrc)},thumbLoad:function(a){this.view.parentNode&&
(a=this.view.parentNode.getElementsByClassName("gmAlbumsListMasonryPreloader")[0])&&this.view.parentNode.removeChild(a);this.imgSize=new t(this.itemImg.naturalWidth,this.itemImg.naturalHeight);this.resize();this.itemImg.style.opacity="1";this.itemImgComplete=!0;this.showAudioPlayerControls()},resize:function(){if(this.size.width!=this.view.clientWidth||this.size.height!=this.view.clientHeight)if("audio"!=this.type)this.fit();else{var a=new t(300,300);this.itemImg.style.top=(this.size.height-a.height)/
2+"px";this.itemImg.style.left=(this.size.width-a.width)/2+"px"}},set scale(a){"audio"!=this.type&&(this.width=this.imgSize.width*a,this.height=this.imgSize.height*a,this.maxXoffset=this.width>this.size.width?(this.width-this.size.width)/2:0,this.maxYoffset=this.height>this.size.height?(this.height-this.size.height)/2:0,this._scale=a)},get scale(){return this._scale},fit:function(a){if("audio"!=this.type){var b=0;this.size=new t(this.view.clientWidth,this.view.clientHeight);700<this.view.clientHeight&&
(b=100);var c=X(this.imgSize,new t(this.size.width-4,this.size.height-2*b),!1,!1);this.fitScale=this.newScale=this.newScaleMW=c.height/this.imgSize.height;this.newPosition=new p(c.x+2,c.y+b);a?this.renderTransformTo(this.newPosition,this.newScale):(y(this.animaSliderRender),this.scale=this.newScale,this.imageTranslate=this.newPosition);this._fitMode=!0;this.isBlockDraging=this.draging=!1}},zoomByScaleIter:function(a,b){"audio"!=this.type&&(y(this.animaSliderRender),this.zooming=!0,this.newScaleMW+=
a,this.newScaleMW=Math.max(this.fitScale,this.newScaleMW),this.newScaleMW=Math.min(this.maxScale,this.newScaleMW),a=this.startGlobalPoint.x-(this.startGlobalPoint.x-this.origin.x)/this.startScale*this.newScaleMW,b=this.startGlobalPoint.y-(this.startGlobalPoint.y-this.origin.y)/this.startScale*this.newScaleMW,this.scale=this.newScaleMW,this.imageTranslate=this.checkOffset(new p(a,b)),this._fitMode=!1,this.newScaleMW<=this.fitScale&&(this._fitMode=!0))},zoomByScaleDeltaToPoint:function(a,b,c){if("audio"!=
this.type){y(this.animaSliderRender);this.zooming=!0;a=this.startDistForZoom/this.startScale*(a/this.startDistForZoom)/(this.startDistForZoom/this.startScale)*this.startScale;var e=0;a>this.maxScale&&(e=.8*-(a-this.maxScale));a+=e;e=this.startGlobalPoint.x-(this.startGlobalPoint.x-this.origin.x)/this.scale*a;var d=this.startGlobalPoint.y-(this.startGlobalPoint.y-this.origin.y)/this.scale*a;this.origin=new p(e,d);this.focusGlobalPoint=c;this.scale=this.newScale=a;this.imageTranslate=new p(e-b.x,d-
b.y);this._fitMode=!1}},zoomIn:function(a,b){if("audio"!=this.type)if(this.newScale==a&&this.newScaleMW==a)this.fit(!0);else{var c=b.x-(b.x-this.imageTranslate.x)/this.scale*a;b=b.y-(b.y-this.imageTranslate.y)/this.scale*a;this.newScale=this.newScaleMW=a;this.newPosition=this.checkOffset(new p(c,b),a);this.renderTransformTo(this.newPosition,this.newScale);this._fitMode=!1}},is_zooming:function(){return!this._fitMode},is_pointInItem:function(a){return"audio"!=this.type&&this.itemImgComplete?a.x>this.itemImg.getBoundingClientRect().left&&
a.x<this.itemImg.getBoundingClientRect().right&&a.y>this.itemImg.getBoundingClientRect().top&&a.y<this.itemImg.getBoundingClientRect().bottom?!0:!1:!1},checkOffset:function(a,b){if(b){var c=this.imgSize.width*b;b*=this.imgSize.height;var e=c>this.size.width?(c-this.size.width)/2:0;var d=b>this.size.height?(b-this.size.height)/2:0}else c=this.width,b=this.height,e=this.maxXoffset,d=this.maxYoffset;var k=a.x+c/2-this.size.width/2;a=a.y+b/2-this.size.height/2;return new p(0==k?-(c-this.size.width)/2:
-(c-this.size.width)/2+Math.min(Math.abs(k),e)*k/Math.abs(k),0==a?-(b-this.size.height)/2:-(b-this.size.height)/2+Math.min(Math.abs(a),d)*a/Math.abs(a))},set imageTranslate(a){this._imageTranslate=a;this.itemImg.style.transform="matrix("+this.scale+", 0, 0, "+this.scale+", "+a.x+", "+a.y+")"},get imageTranslate(){return this._imageTranslate},get zoomBound(){return{lt:new p((this.size.width-this.width)/2-this.maxXoffset,(this.size.height-this.height)/2-this.maxYoffset),rb:new p((this.size.width-this.width)/
2+this.maxXoffset,(this.size.height-this.height)/2+this.maxYoffset)}},renderTransformTo:function(a,b){function c(){d=.3*d+.15*(a.x-e.imageTranslate.x);k=.3*k+.15*(a.y-e.imageTranslate.y);b&&(h=.3*h+.15*(b-e.scale));var f=e.imageTranslate.x;f+=d;var g=e.imageTranslate.y;g+=k;b&&(e.scale+=h);e.imageTranslate=new p(f,g);.04>Math.abs(d)&&.04>Math.abs(k)&&.04>Math.abs(h)?(y(e.animaSliderRender),e.itemImg.style.willChange="unset",b&&(e.scale=b),e.imageTranslate=new p(a.x,a.y)):e.animaSliderRender=x(c)}
var e=this;y(e.animaSliderRender);var d=0,k=0,h=0;e.animaSliderRender=x(c)},renderGlidingTransform:function(){function a(){b.speedX*=c;b.speedY*=e;var f=b.imageTranslate.x;f+=b.speedX;var h=b.imageTranslate.y;h+=b.speedY;f<d.lt.x?(b.speedX*=-1,f=d.lt.x+b.speedX,c=.75):f>d.rb.x&&(b.speedX*=-1,f=d.rb.x+b.speedX,c=.75);h<d.lt.y?(b.speedY*=-1,h=d.lt.y+b.speedY,e=.75):h>d.rb.y&&(b.speedY*=-1,h=d.rb.y+b.speedY,e=.75);b.imageTranslate=new p(f,h);.04>Math.abs(b.speedX)&&.04>Math.abs(b.speedY)?(y(b.animaSliderRender),
b.speedX=0,b.speedY=0,b.itemImg.style.willChange="unset"):b.animaSliderRender=x(a)}var b=this;y(b.animaSliderRender);var c=.95,e=.95,d=this.zoomBound;b.animaSliderRender=x(a)},renderStretchstretchTransform:function(){function a(){e=.2*e+.15*(c.x-b.imageTranslate.x);d=.2*d+.15*(c.y-b.imageTranslate.y);b.imageTranslate=new p(b.imageTranslate.x+e,b.imageTranslate.y+d);.04>Math.abs(e)&&.04>Math.abs(d)?(y(b.animaSliderRender),b.imageTranslate=c,b.itemImg.style.willChange="unset"):b.animaSliderRender=x(a)}
var b=this;y(b.animaSliderRender);var c=this.checkOffset(new p(b.imageTranslate.x+b.speedX,b.imageTranslate.y+b.speedY)),e=0,d=0;b.animaSliderRender=x(a)},startDrag:function(a,b){"audio"!=this.type&&(this.itemImg.style.willChange="transform",this.isBlockDragingMem=this.isBlockDraging,this.startDistForZoom=b,this.startGlobalPoint=this.focusGlobalPoint=a,this.startTranslate=this.origin=this.imageTranslate,this.speedY=this.speedX=0,this.newX=this.imageTranslate.x,this.newY=this.imageTranslate.y,this.startScale=
this.scale)},stopDrag:function(){"audio"!=this.type&&(this.zooming&&(this.scale<this.fitScale?this.fit(!0):this.scale>this.maxScale?this.zoomIn(this.maxScale,this.focusGlobalPoint):this.renderStretchstretchTransform(),this.zooming=!1),this.draging&&(this.isBlockDraging?this.renderStretchstretchTransform():this.renderGlidingTransform(),this.draging=!1))},dragin:function(a){if("audio"==this.type)return!1;var b=0<this.maxXoffset?this.startTranslate.x-a.x:this.startTranslate.x;a=0<this.maxYoffset?this.startTranslate.y-
a.y:this.startTranslate.y;var c=a+this.height/2-this.size.height/2;this.isBlockDraging=Math.abs(b+this.width/2-this.size.width/2)>this.maxXoffset||Math.abs(c)>this.maxYoffset;c=this.checkOffset(new p(b,a));var e=a-c.y;b-=.7*(b-c.x);a-=.7*e;this.oldX=this.newX;this.newX=b;this.speedX=.7*(this.newX-this.oldX);this.oldY=this.newY;this.newY=a;this.speedY=.7*(this.newY-this.oldY);this.imageTranslate=new p(b,a);return this.draging=!0},createAudioPlaterControls:function(){function a(a){a.preventDefault();
a.stopPropagation();switch(a.type){case "mousedown":b.tryPlayOrPauseMp3();break;case "touchstart":b.tryPlayOrPauseMp3()}}if(!document.getElementById("gmAudioPlayer"))return null;var b=this,c=document.createElement("div");c.className="gmCircleAudioControllerAlbumsListMasonryContainer";c.style.backgroundColor=g(d(this.appName).sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity);var e=document.createElement("div");e.className="gmBtHolderAlbumsListMasonry";e.style.position="absolute";
e.style.transform="translate3d(0px,0px,0)";e.style.transition="transform 0.5s";c.appendChild(e);var f=document.createElement("span");f.className="gmCirclebButtonAudioPlayerAlbumsListMasonry";f.setAttribute("title","Play");f.innerHTML='<svg version="1.1" viewBox="0 0 50 60" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M48.479,27.435L5.672,0.915C2.553-1.132,0,0.374,0,4.261v51.48c0,3.885,2.553,5.391,5.672,3.346l42.807-26.52   c0,0,1.521-1.07,1.521-2.566S48.479,27.435,48.479,27.435z"/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>';
f.style.fill=g(d(this.appName).sliderNavigationIconColor,.8);e.appendChild(f);f=document.createElement("span");f.className="gmCirclebButtonAudioPlayerAlbumsListMasonry";f.setAttribute("title","Stop");f.innerHTML='<svg version="1.1" viewBox="0 0 53 70" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><g><path d="M44,0c-4.972,0-9,1.529-9,6.5v57c0,4.971,4.028,6.5,9,6.5c4.971,0,9-1.529,9-6.5v-57C53,1.529,48.971,0,44,0z"/><path d="M9,0C4.028,0,0,1.529,0,6.5v57C0,68.471,4.028,70,9,70c4.971,0,9-1.529,9-6.5v-57C18,1.529,13.971,0,9,0z"/></g></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>';
f.style.fill=g(d(this.appName).sliderNavigationIconColor,.8);f.style.left="109px";e.appendChild(f);c.addEventListener("mousedown",a,!0);c.addEventListener("touchstart",a,!0);return c},showAudioPlayerControls:function(){if(this.playerControls&&this.playerControls){var a=document.getElementById("gmAudioPlayer");this.audioStatus=a.src==this.item.url?a.paused?"pause":"play":"pause";this.audioRedy||(this.view.appendChild(this.playerControls),this.audioRedy=!0)}},tryPlayOrPauseMp3:function(){if(document.getElementById("gmAudioPlayer")&&
"audio"==this.type){var a=document.getElementById("gmAudioPlayer");a.src==this.item.url?a.paused?a.play():a.pause():(a.src=this.item.url,a.play())}},audioHandler:function(a){switch(a.type){case "ended":this.audioStatus="pause";break;case "play":this.audioStatus="play";break;case "pause":this.audioStatus="pause"}},set audioStatus(a){var b=this.playerControls.getElementsByClassName("gmBtHolderAlbumsListMasonry")[0];switch(a){case "play":this.itemImg.classList.add("gmAlbusListRotate");b.style.transform=
new P(-109,0,0);break;case "pause":this.itemImg.classList.remove("gmAlbusListRotate"),b.style.transform=new P(0,0,0)}}};ca.prototype={initByPageNum:function(a){if(this.pageNum!=a){for(;this.view.hasChildNodes();)this.view.removeChild(this.view.lastChild);this.delegate.pages[a]?(this.delegate.pages[a].itemImgComplete||this.view.appendChild(this.preloader),this.view.appendChild(this.delegate.pages[a].view),this.delegate.pages[a].tryToShow(),this.pageNum=a,this.bj&&this.view.appendChild(this.bj)):this.pageNum=
void 0}},resize:function(){(this.pageNum||0===this.pageNum)&&this.delegate.pages[this.pageNum].resize()}};da.prototype={loadingStatusHandler:function(a){"CollectionItems"==a.params.target&&this.showPreloader(!0)},addToStage:function(){var a=this,b=document.getElementsByTagName("body")[0];document.getElementsByTagName("html");this.view.style.zIndex=O(b)+1;V();b.appendChild(this.view);setTimeout(function(){a.view.classList.add("gmAlbumsListMasonryColectionSliderActivate")},30);setTimeout(function(){a.term&&
a.initByTerm(a.term)},400)},initByTerm:function(a){a.itemsList&&0<a.itemsList.length?(this.term=a,this.createLayout()):(d(this.appName).appEventManager.addGMEventListener(r.startLoading,this,"loadingStatusHandler"),d(this.appName).appEventManager.addGMEventListener(r.termColectionLoadingComplete,this,"colectionCompleteHandler"),this.delegate.getCollectionForTerm(a))},prepareToRemove:function(){var a=this;this.statusRemove=!1;d(this.appName).appEventManager.removeGMEventListener(r.startLoading,this,
"loadingStatusHandler");d(this.appName).appEventManager.removeGMEventListener(r.termColectionLoadingComplete,this,"colectionCompleteHandler");window.removeEventListener("wheel",a.handlerMWheel,!1);document.removeEventListener("keydown",a.handlerKB,!0);this.delegate.itemsCountersUpdate();W();this.showPreloader(!1);this.subMenu&&this.showSubmenu&&(this.subMenu.style.transition="0s",this.needShowSubmenu(!1));a.view.classList.remove("gmAlbumsListMasonryColectionSliderActivate");document.getElementById("gmAudioPlayer")&&
document.getElementById("gmAudioPlayer").pause();if(A&&l()){a.view&&a.view.parentNode&&a.view.parentNode.removeChild(a.view);for(var b=0;b<a.pages.length;b++)delete a.pages[b];delete a.pages;delete a.view;a.delegate.removeSlider()}else setTimeout(function(){a.view&&a.view.parentNode&&a.view.parentNode.removeChild(a.view);for(var b=0;b<a.pages.length;b++)delete a.pages[b];delete a.pages;delete a.view;a.delegate.removeSlider()},400)},keydownHandler:function(a){var b=this;b.handlerKB=function(a){switch(a.keyCode){case 37:b.gotoPrev();
break;case 39:b.gotoNext();break;case 27:if(b.modal){b.modal.prepareToRemove();break}b.prepareToRemove();break;case 32:if(b.modal)b.modal.prepareToRemove();else return b.switchShowControlls(),b.needHideControlls=!b.isControllsShow,E(a),!1}};return b.handlerKB},showPreloader:function(a){if(a){if(!(0<this.view.getElementsByClassName("gmAlbumsListMasonryPreloader").length)){var b=L(g(d(this.appName).sliderPreloaderColor,.7));this.view.appendChild(b)}}else if(this.view.getElementsByClassName("gmAlbumsListMasonryPreloader")[0]){var c=
this;b=this.view.getElementsByClassName("gmAlbumsListMasonryPreloader")[0];Q(b,function(){b.parentNode&&c.view.removeChild(b)},500)}},colectionCompleteHandler:function(a){if(a.params.term||!a.params.term.itemsList)this.term=a.params.term,this.showPreloader(!1),this.createLayout()},createLayout:function(){var a=this,b=this.term.itemsList;if(b&&0<b.length)for(var c=0;c<b.length;c++){var e=new ba(this);e.initByItem(b[c]);this.pages.push(e)}this.pageAmount=this.pages.length;A&&(this.slider.classList.add("miniScreen"),
this.prevButton.classList.add("sliderNextPrevButtonsMiniScreen"),this.nextButton.classList.add("sliderNextPrevButtonsMiniScreen"));this.initSlider();this.thumbsBar&&(this.thumbsBar.initItemsList(b),this.thumbsBar.selectThumbByIndex(this.pageNum));700>a.view.clientHeight&&this.slider.classList.add("miniScreen");l()||document.addEventListener("keydown",a.keydownHandler(),!0);window.addEventListener("wheel",a.mouseWheelHandler(),!1);setTimeout(function(){a.showControlls(!0)},500)},set pageNum(a){this._pageNum=
a;this.updateControlls()},get pageNum(){return this._pageNum},initSlider:function(){if(0==this.sliderPages.length)for(var a=0;3>a;a++){var b=new ca(this);this.slider.appendChild(b.view);this.sliderPages.push(b)}var c=2<this.pageAmount?-100:0;for(a=0;3>a;a++)b=this.sliderPages[a],b.view.style.left=c+"%",b.pageNum=void 0,c+=100;this.startDragHandler?this.gotoPageByNum(0):(this.startDragHandler=this.startDrag(),this.slider.addEventListener("touchstart",this.startDragHandler,z),this.slider.addEventListener("mousedown",
this.startDragHandler,!1),this.gotoPageByNum(this.startItemIndex))},set scrollViewTranslateY(a){this._scrollViewTranslateY=a;this.slider.style.transform="translateY("+a+"px) translateX("+this.scrollViewTranslateX+"px)";0!=a&&this.sliderVerticalRender()},get scrollViewTranslateY(){return this._scrollViewTranslateY},set scrollViewTranslateX(a){this._scrollViewTranslateX=a;this.slider.style.transform="translateY("+this.scrollViewTranslateY+"px) translateX("+a+"px)";this.pageRenderByIndex(-Math.round(a/
this.view.clientWidth))},get scrollViewTranslateX(){return this._scrollViewTranslateX},sliderVerticalRender:function(){var a=1-Math.abs(this.scrollViewTranslateY)/(this.view.clientHeight/2);this.background.style.opacity=a;this.needHideControlls||(.8>a?this.showControlls(!1):this.showControlls(!0))},gotoPageByNum:function(a){!this.pageNum&&0!==this.pageNum||!this.currentPageIndex?this.gotoPageByIndex(a,!0):this.gotoPageByIndex(this.currentPageIndex-(this.pageNum-a))},gotoNext:function(){this.gotoPageByIndex(this.currentPageIndex+
1)},gotoPrev:function(){this.gotoPageByIndex(this.currentPageIndex-1)},renderTransformTo:function(a){function b(){e=.2*e+.15*(a.x-c.scrollViewTranslateX);d=.2*d+.15*(a.y-c.scrollViewTranslateY);c.scrollViewTranslateX+=e;c.scrollViewTranslateY+=d;1>Math.abs(e)&&1>Math.abs(d)&&(c.dragging=!1);.1>Math.abs(e)&&.1>Math.abs(d)?(y(c.animaSliderRender),c.scrollViewTranslateX=a.x,c.scrollViewTranslateY=a.y,c.sliderTransitionComplete({target:c.slider})):c.animaSliderRender=x(b)}var c=this;y(c.animaSliderRender);
var e=5*c.speedX,d=5*c.speedY;c.animaSliderRender=x(b)},gotoPageByIndex:function(a,b){3>this.pageAmount&&(a=Math.max(0,a),a=Math.min(this.pageAmount-1,a));2<Math.abs(this.currentPageIndex-a)&&(b=!0);a=-a*this.view.clientWidth;b?(this.scrollViewTranslateX=a,this.sliderTransitionComplete({target:this.slider})):this.renderTransformTo(new p(a,this.scrollViewTranslateY))},pageRenderByIndex:function(a){if(this.currentPageIndex!==a)if(3>this.pageAmount){for(var b=0;b<this.pageAmount;b++)this.sliderPages[b].initByPageNum(b);
this.pageNum=this.currentPageIndex=a}else{var c=(a+1)%3;0>c&&(c+=3);var e=0<=c-1?c-1:2,d=3>c+1?c+1:0,k=[e,c,d],h=[100*a-100,100*a,100*a+100];for(b=0;b<k.length;b++)this.sliderPages[k[b]].view.style.left=h[b]+"%";this.currentPageIndex=a;this.pageNum=0>a?this.pageAmount+(0==a%this.pageAmount?-this.pageAmount:a%this.pageAmount):a%this.pageAmount;this.sliderPages[c].initByPageNum(this.pageNum);this.sliderPages[d].initByPageNum(this.pageNum+1<this.pageAmount?this.pageNum+1:0);this.sliderPages[e].initByPageNum(0>
this.pageNum-1?this.pageAmount-1:this.pageNum-1)}},sliderTransitionComplete:function(a){a.target!=this.slider||0!==this.zoomingPageNum&&!this.zoomingPageNum||this.zoomingPageNum==this.pageNum||(this.pages[this.zoomingPageNum].fit(),this.zoomingPageNum=void 0)},mouseWheelHandler:function(a){var b=this,c=0,e=0,d=void 0;b.handlerMWheel=function(a){a.stopPropagation();var f=new p(0,0);if("deltaX"in a)1===a.deltaMode?(f.x=18*a.deltaX,f.y=18*a.deltaY):(f.x=a.deltaX,f.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&
(f.x=-.16*a.wheelDeltaX),f.y=a.wheelDeltaY?-.16*a.wheelDeltaY:-.16*a.wheelDelta;else if("detail"in a)f.y=a.detail;else return;var k=b.view.getBoundingClientRect().top-document.body.getBoundingClientRect().top,g=b.view.getBoundingClientRect().left-document.body.getBoundingClientRect().left,l=b.view.clientWidth/2,u=b.view.clientHeight/2;a.pageX&&(l=a.pageX,u=a.pageY);l-=g;u-=k;if(b.pages[b.pageNum].is_pointInItem(new p(l,u))||!b.dragging){d||(b.needHideControlls=b.isControllsShow);!b.zoomingPageNum&&
0!==b.zoomingPageNum||b.zoomingPageNum!=b.pageNum?(d=b.pages[b.pageNum],b.zoomingPageNum=b.pageNum):d=b.pages[b.pageNum];if(l!=c||u!=e)d.startDrag(new p(l,u)),c=l,e=u;d.zoomByScaleIter(f.y/-500);d.is_zooming()?b.showControlls(!1):(b.showControlls(b.needHideControlls),d=void 0)}};return b.handlerMWheel},doubleClickController:function(a){if(!B.ios||"mouseup"!=a.type){var b=void 0,c=void 0;a.changedTouches&&a.changedTouches[0]?(b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY):(b=a.pageX,c=a.pageY);
a=this.view.getBoundingClientRect().top-document.body.getBoundingClientRect().top;var e=this.view.getBoundingClientRect().left-document.body.getBoundingClientRect().left;b-=e;c-=a;var d=this.pages[this.pageNum].is_pointInItem(new p(b,c)),k=this;this.firsrTap?(clearTimeout(this.firsrTap),this.firsrTap=void 0,d&&(this.pages[this.pageNum].zoomIn(1,new p(b,c)),(this.zoomingPageNum=this.pages[this.pageNum].is_zooming()?this.pageNum:void 0)||0===this.zoomingPageNum?(k.needHideControlls=k.isControllsShow,
k.showControlls(!1)):k.showControlls(k.needHideControlls))):this.firsrTap=setTimeout(function(){k.firsrTap=void 0;d||A?k.zoomingPageNum||0===k.zoomingPageNum?(k.pages[k.zoomingPageNum].fit(!0),k.showControlls(k.needHideControlls)):(k.switchShowControlls(),k.needHideControlls=!k.isControllsShow):k.prepareToRemove()},300)}},startDrag:function(a){function b(a){a.originalEvent&&(a=a.originalEvent);a.preventDefault();if(a.touches)if(!e.dragging&&1<a.touches.length){u=!0;var b=a.touches[0].pageX;var c=
a.touches[0].pageY;var d=a.touches[1].pageX;a=a.touches[1].pageY;var f=Math.hypot(b-d,c-a);b+=(d-b)/2;c+=(a-c)/2}else u=!1,b=a.touches[0].pageX,c=a.touches[0].pageY;else b=a.pageX,c=a.pageY;b-=v;c-=t;if(!(B.ios&&20>=k))if(void 0===n&&(c===h?n=!1:(d=180*Math.atan2(Math.abs(c-h),Math.abs(b-k))/Math.PI,n=45<d)),e.dragging||!e.zoomingPageNum&&0!==e.zoomingPageNum)if(n){r=0;if(b=4<Math.abs(h-c)?h-c:0)e.dragging=!0;e.scrollViewTranslateY=m-b}else{e.transition=!0;if(b=4<Math.abs(k-b)?k-b:0)e.dragging=!0;
e.scrollViewTranslateX=g-b;w=x;x=e.scrollViewTranslateX;r=x-w}else{d=e.pages[e.zoomingPageNum];a=4<Math.abs(k-b)?k-b:0;var l=4<Math.abs(h-c)?h-c:0;if(a||l)e.zoomingDrag=!0;u?d.zoomByScaleDeltaToPoint(f,new p(a,l),new p(b,c)):d.dragin(new p(a,l))}}function c(a){a.preventDefault();n=void 0;l()&&(document.removeEventListener("touchmove",b,z),document.removeEventListener("touchend",c,z));document.removeEventListener("mousemove",b,!1);document.removeEventListener("mouseup",c,!1);document.removeEventListener("oncontextmenu",
c,!1);if(e.dragging||u||e.zoomingDrag){if(e.zoomingPageNum||0===e.zoomingPageNum)e.pages[e.zoomingPageNum].stopDrag(),u=!1;else if(4>Math.abs(e.scrollViewTranslateY)){a=e.currentPageIndex;var f=l()?7:3;Math.abs(r)>f&&d==e.currentPageIndex&&(a=0<r?a-1:a+1);e.speedX=r;e.scrollViewTranslateY=0;e.gotoPageByIndex(a)}else.2<Math.abs(e.scrollViewTranslateY/(e.view.clientHeight/2))?e.prepareToRemove():e.renderTransformTo(new p(e.scrollViewTranslateX,0));this.dragging=!1}else e.doubleClickController(a);e.zoomingDrag=
!1}var e=this,d=void 0,k=void 0,h=void 0,g=void 0,m=void 0,n=void 0,u=void 0,q=void 0,t=0,v=0,r=0,w=0,x=0;return function(a){t=e.view.getBoundingClientRect().top-document.body.getBoundingClientRect().top;v=e.view.getBoundingClientRect().left-document.body.getBoundingClientRect().left;e.zoomingPageNum=e.pages[e.pageNum].is_zooming()?e.pageNum:void 0;y(e.animaSliderRender);d=e.currentPageIndex;a.preventDefault();a.originalEvent&&(a=a.originalEvent);if(!a.button||0===a.button){if(a.touches)if(!e.dragging&&
1<a.touches.length){u=!0;var f=a.touches[0].pageX;var n=a.touches[0].pageY;var F=a.touches[1].pageX;a=a.touches[1].pageY;q=Math.hypot(f-F,n-a);f+=(F-f)/2;n+=(a-n)/2;e.zoomingPageNum=e.pageNum;e.needHideControlls=e.isControllsShow;e.showControlls(!1)}else f=a.touches[0].pageX,n=a.touches[0].pageY;else f=a.pageX,n=a.pageY;f-=v;n-=t;w=r=e.speedX=e.speedY=0;x=e.scrollViewTranslateX;k=f;h=n;g=e.scrollViewTranslateX;m=e.scrollViewTranslateY;(e.zoomingPageNum||0===e.zoomingPageNum)&&e.pages[e.zoomingPageNum].startDrag(new p(k,
h),q);l()&&(document.addEventListener("touchmove",b,z),document.addEventListener("touchend",c,z));document.addEventListener("mousemove",b,!1);document.addEventListener("mouseup",c,!1);document.addEventListener("oncontextmenu",c,!1)}}},audioPlayerHandler:function(a){this.pages[this.pageNum]&&this.pages[this.pageNum].audioHandler(a);this.thumbsBar&&this.thumbsBar.changeAudioStatusForIndex(this.pageNum,a)},createControlls:function(){function a(a){"like"==a.getAttribute("type")&&a.getAttribute("like")||
("bookmark"==a.getAttribute("type")&&a.getAttribute("bookmark")?a.style.backgroundColor=g(d(e.appName).sliderNavigationColor,d(e.appName).sliderNavigationColorOpacity):(a.style.backgroundColor=g(d(e.appName).sliderNavigationColor,d(e.appName).sliderNavigationColorOpacity),a.childNodes[0].style.fill=g(d(e.appName).sliderNavigationIconColor,1)))}function b(a){"bookmark"==a.getAttribute("type")&&a.getAttribute("bookmark")?a.style.backgroundColor=g(d(e.appName).sliderNavigationIconColor,d(e.appName).sliderNavigationColorOpacity):
(a.style.backgroundColor=g(d(e.appName).sliderNavigationIconColor,d(e.appName).sliderNavigationColorOpacity),a.childNodes[0].style.fill=g(d(e.appName).sliderNavigationColor,1))}function c(c){var f=this;if("click"==c.type){if(l()&&(b(f),setTimeout(function(){a(f)},200)),c=e.term.itemsList[e.pageNum])switch(this.getAttribute("type")){case "close":e.prepareToRemove();break;case "info":e.showItemInfo();break;case "link":c.link&&window.open(c.link,"_blank");break;case "like":a(this);e.delegate.likeItem=
e.pageNum;this.setAttribute("like",c.ID);this.style.cursor="default";this.style.pointerEvents="none";this.getElementsByTagName("svg")[0].style.fill="red";break;case "bookmark":a(this);e.delegate.bookmarkItem(e.pageNum)?(this.setAttribute("bookmark",c.ID),this.getElementsByTagName("svg")[0].style.fill="red"):(this.removeAttribute("bookmark"),this.getElementsByTagName("svg")[0].style.fill=g(d(e.appName).sliderNavigationIconColor,1));break;case "share":e.showItemShare();break;case "download":c=c.url;
var k=document.createElement("A");k.href=c;k.download=c.substr(c.lastIndexOf("/")+1);document.body.appendChild(k);k.click();document.body.removeChild(k);break;case "coments":c=c.sharelink+"/#comments",window.open(c,"_blank")}}else"mouseenter"==c.type?b(this):"mouseleave"==c.type&&a(this)}var e=this;this.prevButton=document.createElement("div");this.prevButton.className="sliderNextPrevButtons";this.prevButton.style.left="0px";this.prevButton.style.transform="translateX(-120%)";this.prevButton.style.backgroundColor=
g(d(this.appName).sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity);this.prevButton.style.visibility="hidden";this.prevButton.innerHTML='<svg height="128px" id="Layer_1" style="enable-background:new 0 0 128 128;" version="1.1" viewBox="0 0 128 128" width="128px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><g><line style="stroke-width:12;stroke-linecap:square;stroke-miterlimit:10;" x1="57.12" x2="17.787" y1="103.334" y2="64"/><line style="stroke-width:12;stroke-linecap:square;stroke-miterlimit:10;" x1="17.787" x2="57.12" y1="64" y2="24.666"/></g><line style="stroke-width:12;stroke-miterlimit:10;" x1="17.787" x2="118.213" y1="64" y2="64"/></g></svg>';
this.prevButton.childNodes[0].style.stroke=g(d(this.appName).sliderNavigationIconColor,1);this.prevButton.onmouseover=function(){this.style.backgroundColor=g(d(e.appName).sliderNavigationColor,1)};this.prevButton.onmouseout=function(){this.style.backgroundColor=g(d(e.appName).sliderNavigationColor,d(e.appName).sliderNavigationColorOpacity)};this.prevButton.onclick=function(){e.gotoPrev()};this.view.appendChild(this.prevButton);this.nextButton=document.createElement("div");this.nextButton.className=
"sliderNextPrevButtons";this.nextButton.style.backgroundColor=g(d(this.appName).sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity);this.nextButton.style.right="0px";this.nextButton.style.transform="translateX(120%)";this.nextButton.style.visibility="hidden";this.nextButton.innerHTML='<svg height="128px" id="Layer_1" style="enable-background:new 0 0 128 128;" version="1.1" viewBox="0 0 128 128" width="128px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><g><line style="stroke-width:12;stroke-linecap:square;stroke-miterlimit:10;" x1="70.88" x2="110.213" y1="24.666" y2="64"/><line style="stroke-width:12;stroke-linecap:square;stroke-miterlimit:10;" x1="110.213" x2="70.88" y1="64" y2="103.334"/></g><line style="stroke-width:12;stroke-miterlimit:10;" x1="110.213" x2="9.787" y1="64" y2="64"/></g></svg>';
this.nextButton.childNodes[0].style.stroke=g(d(this.appName).sliderNavigationIconColor,1);this.nextButton.onmouseover=function(){this.style.backgroundColor=g(d(e.appName).sliderNavigationColor,1)};this.nextButton.onmouseout=function(){this.style.backgroundColor=g(d(e.appName).sliderNavigationColor,d(e.appName).sliderNavigationColorOpacity)};this.nextButton.onclick=function(){e.gotoNext()};this.view.appendChild(this.nextButton);d(this.appName).sliderThumbBarEnable&&(this.thumbsBar=new Z(this),this.footer.appendChild(this.thumbsBar.view));
this.view.appendChild(this.footer);this.view.appendChild(this.header);this.infoBox1=document.createElement("div");this.infoBox1.className="gmInfoBox1";this.header.appendChild(this.infoBox1);this.buttonsBox=document.createElement("div");this.buttonsBox.className="gmInfoBox1";this.buttonsBox.style.float="right";this.header.appendChild(this.buttonsBox);var f=void 0;f=document.createElement("div");f.className="sliderItemsButtons";f.setAttribute("type","link");f.innerHTML='<svg height="1792" viewBox="0 0 1792 1792" width="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z"/></svg>';
f.style.backgroundColor=g(d(this.appName).sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity);f.childNodes[0].style.fill=g(d(this.appName).sliderNavigationIconColor,1);this.linkButton=f;f.addEventListener("click",c,!1);f.addEventListener("mouseenter",c,!1);f.addEventListener("mouseleave",c,!1);this.buttonsBox.appendChild(f);d(this.appName).sliderInfoEnable&&(f=document.createElement("div"),f.className="sliderItemsButtons",f.setAttribute("type","info"),f.innerHTML='<svg height="100px" id="Capa_1" style="enable-background:new 0 0 46 100;" version="1.1" viewBox="0 0 46 100" width="46px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M35.162,0c6.696,0,10.043,4.567,10.043,9.789c0,6.522-5.814,12.555-13.391,12.555c-6.344,0-10.045-3.752-9.869-9.947   C21.945,7.176,26.35,0,35.162,0z M14.543,100c-5.287,0-9.164-3.262-5.463-17.615l6.07-25.457c1.057-4.077,1.23-5.707,0-5.707   c-1.588,0-8.451,2.816-12.51,5.59L0,52.406C12.863,41.48,27.662,35.072,34.004,35.072c5.285,0,6.168,6.361,3.525,16.148   L30.58,77.98c-1.234,4.729-0.703,6.359,0.527,6.359c1.586,0,6.787-1.963,11.896-6.041L46,82.377C33.488,95.1,19.83,100,14.543,100z   "/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>',
f.style.backgroundColor=g(d(this.appName).sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity),f.childNodes[0].style.fill=g(d(this.appName).sliderNavigationIconColor,1),this.infoButton=f,f.addEventListener("click",c,!1),f.addEventListener("mouseenter",c,!1),f.addEventListener("mouseleave",c,!1),this.buttonsBox.appendChild(f));d(this.appName).sliderItemDiscuss&&(f=document.createElement("div"),f.className="sliderItemsButtons",f.setAttribute("type","coments"),f.innerHTML='<svg style="enable-background:new 0 0 24 24;" version="1.1" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="info"/><g id="icons"><path d="M20,1H4C1.8,1,0,2.8,0,5v10c0,2.2,1.8,4,4,4v3c0,0.9,1.1,1.3,1.7,0.7L9.4,19H20c2.2,0,4-1.8,4-4V5   C24,2.8,22.2,1,20,1z M14,13H8c-0.6,0-1-0.4-1-1c0-0.6,0.4-1,1-1h6c0.6,0,1,0.4,1,1C15,12.6,14.6,13,14,13z M16,9H8   C7.4,9,7,8.6,7,8c0-0.6,0.4-1,1-1h8c0.6,0,1,0.4,1,1C17,8.6,16.6,9,16,9z" id="message"/></g></svg>',
f.style.backgroundColor=g(d(this.appName).sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity),f.childNodes[0].style.fill=g(d(this.appName).sliderNavigationIconColor,1),this.commentsButton=f,f.addEventListener("click",c,!1),f.addEventListener("mouseenter",c,!1),f.addEventListener("mouseleave",c,!1),this.buttonsBox.appendChild(f));d(this.appName).sliderItemDownload&&(f=document.createElement("div"),f.className="sliderItemsButtons",f.setAttribute("type","download"),f.innerHTML='<svg version="1.1" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="info"/><g id="icons"><g id="save"><path d="M11.2,16.6c0.4,0.5,1.2,0.5,1.6,0l6-6.3C19.3,9.8,18.8,9,18,9h-4c0,0,0.2-4.6,0-7c-0.1-1.1-0.9-2-2-2c-1.1,0-1.9,0.9-2,2    c-0.2,2.3,0,7,0,7H6c-0.8,0-1.3,0.8-0.8,1.4L11.2,16.6z"/><path d="M19,19H5c-1.1,0-2,0.9-2,2v0c0,0.6,0.4,1,1,1h16c0.6,0,1-0.4,1-1v0C21,19.9,20.1,19,19,19z"/></g></g></svg>',
f.style.backgroundColor=g(d(this.appName).sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity),f.childNodes[0].style.fill=g(d(this.appName).sliderNavigationIconColor,1),this.downloadButton=f,f.addEventListener("click",c,!1),f.addEventListener("mouseenter",c,!1),f.addEventListener("mouseleave",c,!1),this.buttonsBox.appendChild(f));d(this.appName).sliderSocialShareEnabled&&(f=document.createElement("div"),f.className="sliderItemsButtons",f.setAttribute("type","share"),f.innerHTML='<svg height="1792" viewBox="0 0 1792 1792" width="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1344 1024q133 0 226.5 93.5t93.5 226.5-93.5 226.5-226.5 93.5-226.5-93.5-93.5-226.5q0-12 2-34l-360-180q-92 86-218 86-133 0-226.5-93.5t-93.5-226.5 93.5-226.5 226.5-93.5q126 0 218 86l360-180q-2-22-2-34 0-133 93.5-226.5t226.5-93.5 226.5 93.5 93.5 226.5-93.5 226.5-226.5 93.5q-126 0-218-86l-360 180q2 22 2 34t-2 34l360 180q92-86 218-86z"/></svg>',
f.style.backgroundColor=g(d(this.appName).sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity),f.childNodes[0].style.fill=g(d(this.appName).sliderNavigationIconColor,1),this.shareButton=f,f.addEventListener("click",c,!1),f.addEventListener("mouseenter",c,!1),f.addEventListener("mouseleave",c,!1),this.buttonsBox.appendChild(f));d(this.appName).sliderBookmarksEnabled&&(f=document.createElement("div"),f.className="sliderItemsButtons",f.setAttribute("type","bookmark"),f.innerHTML='<svg height="1792" viewBox="0 0 1792 1792" width="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1420 128q23 0 44 9 33 13 52.5 41t19.5 62v1289q0 34-19.5 62t-52.5 41q-19 8-44 8-48 0-83-32l-441-424-441 424q-36 33-83 33-23 0-44-9-33-13-52.5-41t-19.5-62v-1289q0-34 19.5-62t52.5-41q21-9 44-9h1048z"/></svg>',
f.style.backgroundColor=g(d(this.appName).sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity),f.childNodes[0].style.fill=g(d(this.appName).sliderNavigationIconColor,1),this.bookMarkButton=f,f.addEventListener("click",c,!1),f.addEventListener("mouseenter",c,!1),f.addEventListener("mouseleave",c,!1),this.buttonsBox.appendChild(f));d(this.appName).sliderLikesEnabled&&(f=document.createElement("div"),f.className="sliderItemsButtons",f.setAttribute("type","like"),f.innerHTML='<svg enable-background="new 0 0 51 46" height="46px" id="Layer_1" version="1.1" viewBox="0 0 51 46" width="51px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M46.188,4.101c-5.529-5.53-14.495-5.53-20.023,0L25.39,4.875l-0.996-0.774c-5.529-5.53-14.715-5.53-20.245,0  C-1.38,9.63-1.27,18.595,4.26,24.125l18.753,18.643c0.671,0.671,1.4,1.258,2.376,1.766c0.76-0.508,1.483-1.095,2.155-1.766  l18.643-18.643C51.717,18.595,51.717,9.63,46.188,4.101z""/></svg>',
f.style.backgroundColor=g(d(this.appName).sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity),f.childNodes[0].style.fill=g(d(this.appName).sliderNavigationIconColor,1),this.likeButton=f,f.addEventListener("click",c,!1),f.addEventListener("mouseenter",c,!1),f.addEventListener("mouseleave",c,!1),this.buttonsBox.appendChild(f));A||(f=document.createElement("div"),f.setAttribute("type","close"),f.className="sliderItemsButtons",f.innerHTML='<svg height="512px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>',
f.style.backgroundColor=g(d(this.appName).sliderNavigationColor,d(this.appName).sliderNavigationColorOpacity),f.childNodes[0].style.fill=g(d(this.appName).sliderNavigationIconColor,1),this.buttonsBox.appendChild(f),f.addEventListener("click",c,!1),f.addEventListener("mouseenter",c,!1),f.addEventListener("mouseleave",c,!1));A&&(this.infoBox2=document.createElement("div"),this.infoBox2.className="gmInfoBox1",this.infoBox2.style.width="100%",this.footer.appendChild(this.infoBox2),this.header.appendChild(this.buttonsBox),
this.buttonsBox.style.float="none",this.infoBox1.style.float="none");this.titleItem=document.createElement("div");this.titleItem.className="gmAlbumsListMasonryColectionSliderItemTitle";this.titleItem.style.fontSize=d(this.appName).sliderItemTitleFontSize+"px";this.titleItem.style.color=g(d(this.appName).sliderItemTitleTextColor,1);A&&(this.titleItem.classList.add("gmAlbumsListMasonryColectionSliderItemTitleMiniScreen"),this.titleItem.style.fontSize="20px",this.titleItem.style.borderBottom="solid 1px "+
g(d(this.appName).sliderNavigationIconColor,.3));this.infoBox1.appendChild(this.titleItem);this.titleTerm=document.createElement("div");this.titleTerm.className="gmAlbumsListMasonryColectionSliderItemTitle";this.titleTerm.style.fontSize=d(this.appName).sliderItemTitleFontSize/2+"px";this.titleTerm.style.color=g(d(this.appName).sliderItemTitleTextColor,.7);this.titleTerm.classList.add("gmAlbumsListMasonryColectionSliderTermTitle");A?(this.titleTerm.classList.add("gmAlbumsListMasonryColectionSliderTermTitleMiniScreen"),
this.titleTerm.style.fontSize="15px",this.infoBox2.appendChild(this.titleTerm)):(this.titleTerm.style.fontSize=d(this.appName).sliderItemTitleFontSize/2+"px",this.infoBox1.appendChild(this.titleTerm))},switchShowControlls:function(){this.showControlls(!this.isControllsShow)},showControlls:function(a,b){this.isControllsShow!=a&&(b?(this.header.classList.add("gmNoneTransition"),this.footer.classList.add("gmNoneTransition"),this.prevButton.classList.add("gmNoneTransition"),this.nextButton.classList.add("gmNoneTransition")):
(this.header.classList.remove("gmNoneTransition"),this.footer.classList.remove("gmNoneTransition"),this.prevButton.classList.remove("gmNoneTransition"),this.nextButton.classList.remove("gmNoneTransition")),a?(this.header.classList.add("gmAlbumsListMasonrySlidesHeaderActivate"),this.footer.classList.add("gmAlbumsListMasonrySlidesFooterActivate"),this.prevButton.style.transform="translateX(0%)",this.nextButton.style.transform="translateX(0%)"):(this.header.classList.remove("gmAlbumsListMasonrySlidesHeaderActivate"),
this.footer.classList.remove("gmAlbumsListMasonrySlidesFooterActivate"),this.prevButton.style.transform="translateX(-120%)",this.nextButton.style.transform="translateX(120%)"),this.isControllsShow=a)},updateControlls:function(){if(!this.statusRemove){3>this.pageAmount?(this.prevButton.style.visibility=0==this.pageNum?"hidden":"visible",this.nextButton.style.visibility=this.pageNum==this.pageAmount-1?"hidden":"visible",1==this.pageAmount&&(this.prevButton.style.visibility="hidden",this.nextButton.style.visibility=
"hidden")):(this.prevButton.style.visibility="visible",this.nextButton.style.visibility="visible");this.pages[this.pageNum]&&this.pages[this.pageNum].showAudioPlayerControls();var a=this.term.itemsList[this.pageNum];a&&(this.delegate.updateItemLink(a),this.titleItem.innerHTML=a.title?a.title:"",this.titleTerm.innerHTML=this.term.name+" - "+(this.pageNum+1)+" / "+this.pageAmount,this.bookMarkButton&&(this.delegate.is_containIdInBookmarkSet(a.ID)||0===this.delegate.is_containIdInBookmarkSet(a.ID)?(this.bookMarkButton.getElementsByTagName("svg")[0].style.fill=
"red",this.bookMarkButton.setAttribute("bookmark",a.ID)):(this.bookMarkButton.childNodes[0].style.fill=g(d(this.appName).sliderNavigationIconColor,1),this.bookMarkButton.removeAttribute("bookmark"))),this.delegate.likesSet&&this.likeButton&&(this.delegate.likesSet[a.ID]?(this.likeButton.getElementsByTagName("svg")[0].style.fill="red",this.likeButton.style.cursor="default",this.likeButton.style.pointerEvents="none",this.likeButton.setAttribute("like",a.ID)):(this.likeButton.childNodes[0].style.fill=
g(d(this.appName).sliderNavigationIconColor,1),this.likeButton.style.cursor="pointer",this.likeButton.style.pointerEvents="all",this.likeButton.removeAttribute("like"))),a.link?(this.linkButton.style.opacity="1",this.linkButton.style.cursor="pointer",this.linkButton.style.pointerEvents="all"):(this.linkButton.style.opacity=".5",this.linkButton.style.cursor="default",this.linkButton.style.pointerEvents="none"),this.thumbsBar&&this.thumbsBar.selectThumbByIndex(this.pageNum),this.modal&&("info"==this.modal.type?
this.showItemInfo():this.modal.prepareToRemove()),this.delegate.viewItem=this.pageNum)}},resizeHandler:function(){var a=this;this.resizeDelay&&clearTimeout(this.resizeDelay);410>a.view.clientHeight&&(a.showControlls(!1,!0),a.needHideControlls=!0);this.resizeDelay=setTimeout(function(){for(var b=0;b<a.pages.length;b++)a.pages[b].resize();if(a.zoomingPageNum||0===a.zoomingPageNum)a.zoomingPageNum=a.pages[a.zoomingPageNum].is_zooming()?a.zoomingPageNum:void 0;a.gotoPageByIndex(a.currentPageIndex,!0);
a.thumbsBar&&a.thumbsBar.updateView()},200)},showItemShare:function(){this.modal||(this.modal=new N(this));this.modal.type="share";var a=this.term.itemsList[this.pageNum];a=new aa(this.appName,this.modal,a,a.sharelink);this.modal.pushPage(a)},showItemInfo:function(){this.modal||(this.modal=new N(this));this.modal.type="info";var a=this,b=this.term.itemsList[this.pageNum],c=document.createElement("div");c.className="gmAlbumsListMasonryItemInfoBar";c.style.backgroundColor=g(d(this.appName).sliderInfoBoxBgColor,
d(this.appName).sliderInfoBoxBgAlpha);if(!l()||l()&&M){var e=document.createElement("div");e.className="gmInfoBarCloseButton";e.innerHTML='<svg height="512px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';
e.childNodes[0].style.fill=g(d(this.appName).sliderInfoBoxTitleTextColor,1);e.addEventListener("click",function(){a.modal.prepareToRemove()},!1);c.appendChild(e)}var f='<p class="gmItemTitle" style="color: '+g(d(this.appName).sliderInfoBoxTitleTextColor,1)+'">'+b.title+"</p>";b.description&&""!=b.description&&(f+='<p class="gmItemDescription" style="color: '+g(d(this.appName).sliderInfoBoxTextColor,1)+'">'+b.description+"</p>");""!=f&&(e=document.createElement("div"),e.className="gmDescriptionWrap",
e.style.float="none",e.innerHTML=f,c.appendChild(e));f="";b.meta.data&&b.meta.data.model&&(f+="<span class=gmItemMetaExifValue>"+b.meta.data.model+"</span></br>");e=[];b.meta.data&&b.meta.data.focallength&&e.push("<span class=gmItemMetaExifValue>"+b.meta.data.focallength+"</span>");b.meta.data&&b.meta.data.aperture&&e.push("<span class=gmItemMetaExifValue>"+b.meta.data.aperture+"</span>");b.meta.data&&b.meta.data.exposure&&e.push("<span class=gmItemMetaExifValue>"+b.meta.data.exposure+"</span>");
b.meta.data&&b.meta.data.iso&&e.push("<span class=gmItemMetaExifValue>ISO "+b.meta.data.iso+"</span>");for(var k=0;k<e.length;k++)f+=e[k],k<e.length-1&&(f+='<span class="gmItemMetaExifSeparator"> / </span>');""!=f&&(e=document.createElement("div"),e.className="gmDescriptionWrap",e.style.color=g(d(this.appName).sliderInfoBoxTextColor,1),e.style.fontSize="100%",e.innerHTML=f,c.appendChild(e));e=document.createElement("div");e.className="gmDescriptionWrap";e.style.color=g(d(this.appName).sliderInfoBoxTextColor,
1);e.style.fontSize="100%";f=document.createElement("div");f.className="likesViewCom";f.innerHTML='<svg enable-background="new 0 0 167 93" height="93px" id="Layer_1" version="1.1" viewBox="0 0 167 93" width="167px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M83.25,29.25c-9.649,0-17.5,7.851-17.5,17.5s7.851,17.5,17.5,17.5s17.5-7.851,17.5-17.5   S92.899,29.25,83.25,29.25z"/><path d="M83.25,0.75c-45.84,0-83,46-83,46s37.16,46,83,46s83-46,83-46S129.09,0.75,83.25,0.75z M83.25,81.25   c-19.054,0-34.5-15.445-34.5-34.5c0-19.054,15.446-34.5,34.5-34.5s34.5,15.446,34.5,34.5C117.75,65.805,102.304,81.25,83.25,81.25z   "/></g></svg><div class="counterTxt">'+
(b.meta.views?b.meta.views:0)+"</div>";f.getElementsByTagName("svg")[0].style.fill=g(d(this.appName).sliderInfoBoxTitleTextColor,1);e.appendChild(f);f=document.createElement("div");f.className="likesViewCom";f.innerHTML='<svg enable-background="new 0 0 51 46" height="46px" id="Layer_1" version="1.1" viewBox="0 0 51 46" width="51px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M46.188,4.101c-5.529-5.53-14.495-5.53-20.023,0L25.39,4.875l-0.996-0.774c-5.529-5.53-14.715-5.53-20.245,0  C-1.38,9.63-1.27,18.595,4.26,24.125l18.753,18.643c0.671,0.671,1.4,1.258,2.376,1.766c0.76-0.508,1.483-1.095,2.155-1.766  l18.643-18.643C51.717,18.595,51.717,9.63,46.188,4.101z""/></svg><div class="counterTxt">'+
(b.meta.likes?b.meta.likes:0)+"</div>";f.getElementsByTagName("svg")[0].style.fill=g(d(this.appName).sliderInfoBoxTitleTextColor,1);e.appendChild(f);f=document.createElement("div");f.className="likesViewCom";f.innerHTML='<svg style="enable-background:new 0 0 24 24;" version="1.1" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="info"/><g id="icons"><path d="M20,1H4C1.8,1,0,2.8,0,5v10c0,2.2,1.8,4,4,4v3c0,0.9,1.1,1.3,1.7,0.7L9.4,19H20c2.2,0,4-1.8,4-4V5   C24,2.8,22.2,1,20,1z M14,13H8c-0.6,0-1-0.4-1-1c0-0.6,0.4-1,1-1h6c0.6,0,1,0.4,1,1C15,12.6,14.6,13,14,13z M16,9H8   C7.4,9,7,8.6,7,8c0-0.6,0.4-1,1-1h8c0.6,0,1,0.4,1,1C17,8.6,16.6,9,16,9z" id="message"/></g></svg><div class="counterTxt">'+
(b.comment_count?b.comment_count:0)+"</div>";f.getElementsByTagName("svg")[0].style.fill=g(d(this.appName).sliderInfoBoxTitleTextColor,1);e.appendChild(f);c.appendChild(e);e=document.createElement("div");e.className="gmDescriptionWrap";e.style.color=g(d(this.appName).sliderInfoBoxTextColor,1);e.style.fontSize="100%";f="";k='<span class="gmItemMetaKey">Upload: </span><span class="gmItemMetaValue">'+w(b.date)+"</span></br>";f+=k;b.meta.data&&b.meta.data.created_timestamp&&(b='<span class="gmItemMetaKey">Taken: </span><span class="gmItemMetaValue">'+
w(b.meta.data.created_timestamp)+"</span>",f+=b);e.innerHTML='<div class="gmItemsDate">'+f+"</div>";""!=f&&c.appendChild(e);this.modal.pushPage(c)},deleteModal:function(){this.modal&&delete this.modal}};ea.prototype={initByItemAndIndex:function(a,b){this.item=a;this.index=b;this.bookMarkButton&&(this.delegate.is_containIdInBookmarkSet(a.ID)||0===this.delegate.is_containIdInBookmarkSet(a.ID)?(this.bookMarkButton.getElementsByTagName("svg")[0].style.fill="red",this.bookMarkButton.setAttribute("bookmark",
a.ID)):(this.bookMarkButton.childNodes[0].style.fill=this.iconColor,this.bookMarkButton.removeAttribute("bookmark")));this.delegate.likesSet&&this.likeButton&&(this.delegate.likesSet[a.ID]?(this.likeButton.getElementsByTagName("svg")[0].style.fill="red",this.likeButton.style.cursor="default",this.likeButton.style.pointerEvents="none",this.likeButton.setAttribute("like",a.ID)):(this.likeButton.childNodes[0].style.fill=this.iconColor,this.likeButton.style.cursor="pointer",this.likeButton.style.pointerEvents=
"all",this.likeButton.removeAttribute("like")));a.link?(this.linkButton.style.display="block",this.linkButton.style.opacity="1",this.linkButton.style.cursor="pointer",this.linkButton.style.pointerEvents="all"):(this.linkButton.style.opacity="0",this.linkButton.style.display="none",this.linkButton.style.cursor="default",this.linkButton.style.pointerEvents="none")}};fa.prototype={mouseHandler:function(a){switch(a.type){case "mouseenter":if(this.isTouchend)break;this.delegate.itemLeave&&this.delegate.itemLeave.removeHover();
this.delegate.itemLeave=void 0;this.hover.style.opacity="0.99";d(this.appName).collectionThumbSubMenuVisibility&&(this.infoBarTop.initByItemAndIndex(this.item,this.index),this.infoWraperTop.appendChild(this.infoBarTop.view),this.view.appendChild(this.infoWraperTop));break;case "mouseleave":if(this.isTouchend)break;this.delegate.itemLeave=this;if(a.clientX>this.view.getBoundingClientRect().left&&a.clientX<this.view.getBoundingClientRect().right&&a.clientY>this.view.getBoundingClientRect().top&&a.clientY<
this.view.getBoundingClientRect().bottom)break;this.removeHover();break;case "click":this.removeHover();this.delegate.itemClickHandler(parseInt(this.view.getAttribute("gmindex")));this.isTouchend=!1;break;case "touchend":this.isTouchend=!0;break;case "touchstart":this.isTouchend=!0}},removeHover:function(){this.hover.style.opacity="0.01";d(this.appName).collectionThumbSubMenuVisibility&&this.infoWraperTop.parentNode==this.view&&this.view.removeChild(this.infoWraperTop);this.delegate.itemLeave=void 0},
updateView:function(){"audio"!=this.type&&this.img.naturalWidth&&1.1<this.view.clientWidth/this.img.naturalWidth&&!this.itemViewSrc&&(this.img.src=this.item.itemViewSrc)},set musicIdentifireStatus(a){}};ha.prototype={loadingStatusHandler:function(a){"CollectionItems"==a.params.target&&this.showPreloader(!0)},addToStage:function(){var a=this;this.windowScrollY=window.scrollY;var b=document.getElementsByTagName("body")[0];this.view.style.zIndex=O(b)+1;this.view.style.top=this.windowScrollY+"px";l()&&
(this.view.style.minHeight=window.innerHeight+1+"px");b.appendChild(this.view);a.view.classList.add("gmAlbumsListMasonryColectionActivate");document.getElementsByTagName("html")[0].classList.add("gmAlbumsListMasonryPopUpActive");setTimeout(function(){window.scrollTo(0,0);for(var c=a.view,e=[],d=0;d<b.childNodes.length;d++){var g=b.childNodes[d];1==g.nodeType&&"SCRIPT"!=g.nodeName&&g!==c&&(g.classList.add("gmAlbumsListMasonryPopUpBodyChildecCollapse"),e.push(g))}a.bodyElements=e;a.view.style.top="0px";
a.createHeader()},100);setTimeout(function(){a.header.classList.add("collectionHeaderActivate");a.view.appendChild(a.scrollView);a.scrollViewHeight=a.view.clientHeight-a.header.clientHeight;a.scrollView.style.minHeight=a.scrollViewHeight+"px";a.term&&a.initByTerm(a.term)},350);document.addEventListener("keydown",a.keydownHandler(),!1)},initByTerm:function(a){d(this.appName).appEventManager.addGMEventListener(r.startLoading,this,"loadingStatusHandler");d(this.appName).appEventManager.addGMEventListener(r.termColectionLoadingComplete,
this,"colectionCompleteHandler");this.delegate.getCollectionForTerm(a)},prepareToRemove:function(){var a=this;d(this.appName).appEventManager.removeGMEventListener(r.startLoading,this,"loadingStatusHandler");d(this.appName).appEventManager.removeGMEventListener(r.termColectionLoadingComplete,this,"colectionCompleteHandler");this.showPreloader(!1);this.delegate.itemsCountersUpdate();document.removeEventListener("keydown",this.handlerKB,!1);window.removeEventListener("scroll",this.scrollHandler);ma(a.bodyElements);
a.bodyElements.length=0;window.scrollTo(0,this.windowScrollY);a.view.classList.remove("gmAlbumsListMasonryColectionActivate");document.getElementsByTagName("html")[0].classList.remove("gmAlbumsListMasonryPopUpActive");document.getElementById("gmAudioPlayer")&&document.getElementById("gmAudioPlayer").pause();setTimeout(function(){a.view&&a.view.parentNode&&a.view.parentNode.removeChild(a.view);delete a.view;a.delegate.removeCollection()},30)},showPreloader:function(a){if(a){if(!(0<this.scrollView.getElementsByClassName("gmAlbumsListMasonryPreloader").length)){var b=
L(g(d(this.appName).collectionPreloaderColor,.7));this.scrollView.appendChild(b)}}else if(this.scrollView.getElementsByClassName("gmAlbumsListMasonryPreloader")[0]){var c=this;b=this.scrollView.getElementsByClassName("gmAlbumsListMasonryPreloader")[0];Q(b,function(){c.scrollView.removeChild(b)},500)}},keydownHandler:function(a){var b=this;b.handlerKB=function(a){switch(a.keyCode){case 27:b.delegate.slider||b.prepareToRemove()}};return b.handlerKB},colectionCompleteHandler:function(a){if(a.params.term||
!a.params.term.itemsList){var b=this;this.term=a.params.term;this.showPreloader(!1);this.createThumbCollection();var c=window.pageYOffset;this.scrollHandler=function(a){a=b.header.clientHeight;if(B.desktop)window.pageYOffset>a-20?b.showFixedHeader(!0):b.showFixedHeader(!1);else{var e=-(window.pageYOffset-c);c=window.pageYOffset;window.pageYOffset>a-20?b.showFixedHeader(!0,e):b.showFixedHeader(!1,e)}};window.addEventListener("scroll",this.scrollHandler)}},createThumbCollection:function(){if(this.term.itemsList&&
0!=this.term.itemsList.length){for(var a=0;a<this.term.itemsList.length;a++){var b=new fa(this,this.term.itemsList[a],a);this.thumbsList.push(b);b.view.setAttribute("gmIndex",a)}this.arrangeItems()}},arrangeItems:function(){var a=Math.round(this.scrollView.clientWidth/d(this.appName).collectionThumbRecomendedWidth);if(this.columnsArr.length!=a){for(var b=0;b<this.columnsArr.length;b++)this.scrollView.removeChild(this.columnsArr[b]);this.columnsArr=[];b=[];for(var c=0;c<a;c++){var e=document.createElement("div");
e.className="collectionColumn";e.style.width=100/a+"%";this.columnsArr.push(e);b.push(0);this.scrollView.appendChild(e)}a=this.columnsArr[0].clientWidth;for(c=0;c<this.thumbsList.length;c++){e=this.thumbsList[c];var f=b[0];for(var g=0,h=1;h<b.length;h++)f!=Math.min(f,b[h])&&(f=Math.min(f,b[h]),g=h);f=g;this.columnsArr[f].appendChild(e.view);e.view.setAttribute("index",c);this.term.itemsList[c].itemViewThumbSize.height&&(b[f]+=a/this.term.itemsList[c].itemViewThumbSize.width*this.term.itemsList[c].itemViewThumbSize.height+
20);e.updateView()}}},resizeHandler:function(){var a=this;clearTimeout(this.resizeTimeOut);l()?this.resizeTimeOut=setTimeout(function(){a.windowWidth!=window.innerWidth&&(a.windowWidth=window.innerWidth);a.resizeDelay()},150):this.resizeDelay()},resizeDelay:function(){this.arrangeItems()},showFixedHeader:function(a,b){if(!this.fixedHeader){var c=document.createElement("div");c.className="gmAlbumsListMasonryFixedHeder";c.id=this.id+"fixedHeader";this.fixedHeader=c;this.fixedHeader.style.backgroundColor=
g(d(this.appName).collectionHeaderBgColor,1);c=this.term;if(c.name){var e=document.createElement("div");e.className="title";e.innerHTML='<span style="color:'+g(d(this.appName).collectionHeaderTextColor,1)+'">'+c.name+'<span style="color:'+g(d(this.appName).collectionHeaderControllBgColor,1)+'"> \u00b7 '+c.count+"</span></span>";this.fixedHeader.appendChild(e)}this.fixedHeader.style.transform="translateY(-100%)";this.view.appendChild(this.fixedHeader);this.scrollDirection=-1}a?(b&&(this.scrollDirection!=
b/Math.abs(b)&&(this.fixedHeader.style.transform="translateY("+(0<b/Math.abs(b)?0:-100)+"%)"),this.scrollDirection=b/Math.abs(b)),this.isShowFixedHeder||(this.closeButton&&this.fixedHeader.appendChild(this.closeButton),b||(this.fixedHeader.style.transform="translateY(0%)"),this.fixedHeader.style.opacity="1",this.isShowFixedHeder=!0)):this.isShowFixedHeder&&(this.closeButton&&this.header.appendChild(this.closeButton),this.fixedHeader.style.opacity="0",this.fixedHeader.style.transform="translateY(-100%)",
this.isShowFixedHeder=!1)},createHeader:function(){var a=this,b=this.term,c=document.createElement("div");c.className="collectionHeader";c.style.backgroundColor=g(d(a.appName).collectionHeaderBgColor,1);this.view.appendChild(c);this.header=c;if(b.name){var e=document.createElement("div");e.className="title";A&&e.classList.add("titleMiniScreen");e.style.color=g(d(a.appName).collectionHeaderTextColor,1);e.innerHTML=b.name;c.appendChild(e)}b.description&&(e=document.createElement("div"),e.className=
"collectionDescription",e.style.color=g(d(a.appName).collectionHeaderTextColor,1),e.innerHTML=b.description,c.appendChild(e));b=document.createElement("div");b.setAttribute("title","Close (Esc)");b.className="collectionButtons";b.style.backgroundColor=g(d(a.appName).collectionHeaderControllBgColor,1);A&&b.classList.add("collectionButtonsMiniScreen");b.innerHTML='<svg height="512px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';
var f=b.childNodes[0];f.style.fill=g(d(a.appName).collectionHeaderControllIconColor,1);b.addEventListener("mouseover",function(){f.style.fill=g(d(a.appName).collectionHeaderControllBgColor,1);this.style.backgroundColor=g(d(a.appName).collectionHeaderControllIconColor,1)});b.addEventListener("mouseout",function(){f.style.fill=g(d(a.appName).collectionHeaderControllIconColor,1);this.style.backgroundColor=g(d(a.appName).collectionHeaderControllBgColor,1)});b.addEventListener("click",function(){a.prepareToRemove()});
this.closeButton=b;c.appendChild(this.closeButton)},itemClickHandler:function(a){this.delegate.initSliderForTermAndItemIndex(this.term,a)}};R.prototype={updateTermData:function(){this.termData&&(this.coumnter&&(this.coumnter.innerHTML="- "+this.termData.count+" -"),this.view.id=this.termData.key+"_"+this.termData.listIndex)},set rotationTransform(a){var b=a.x/this.selfRect.width*10;a=10*-(a.y/this.selfRect.height);var c=5*Math.sqrt(Math.pow(a,2)+Math.pow(b,2));this.imgHolder&&(this.imgHolder.style.transform=
"rotateY("+b+"deg) rotateX("+a+"deg)");this.hoverArea.style.transform="rotateY("+b+"deg) rotateX("+a+"deg) translateZ("+c+"px)"},startRender:function(a){function b(){u=.2*u+.15*(m-h.rotationTransformX);r=.2*r+.15*(q-h.rotationTransformY);h.rotationTransformX+=u;h.rotationTransformY+=r;h.rotationTransform=new p(h.rotationTransformX,h.rotationTransformY);.07>Math.abs(u)&&.07>Math.abs(r)&&n?y(t):t=x(b)}function c(a){a.preventDefault();n||(m=a.clientX-h.selfRect.x,q=a.clientY-h.selfRect.y)}function e(a){a.preventDefault();
h.imgHolder&&(h.hoverBG.style.opacity="0.01");document.removeEventListener("mousemove",c,!1);h.view.removeEventListener("mouseleave",e,!1);document.removeEventListener("mousedown",f,!1);document.removeEventListener("mouseup",g,!1);q=m=0;n=!0}function f(a){n=!0;q=m=0}function g(a){n=!1;t=x(b)}var h=this,n=!1,m=0,q=0,u=0,r=0,t=void 0;return function(a){h.selfRect=new J(h.view.getBoundingClientRect().left+h.view.clientWidth/2,h.view.getBoundingClientRect().top+h.view.clientHeight/2,h.view.clientWidth/
2,h.view.clientHeight/2);l()||a.preventDefault();a.button&&0!==a.button||(y(t),r=u=0,m=a.clientX-h.selfRect.x,q=a.clientY-h.selfRect.y,d(h.appName).coverHoverEffectEnable&&(document.addEventListener("mousemove",c,!1),document.addEventListener("mousedown",f,!1),document.addEventListener("mouseup",g,!1)),h.view.addEventListener("mouseleave",e,!1),h.imgHolder&&(h.hoverBG.style.opacity="1"),n=!1,d(h.appName).coverHoverEffectEnable&&(t=x(b)))}},set size(a){this._frame=new J(0,0,a.width,a.height);this.view.style.width=
a.width+"px";this.view.style.height=a.height+"px";this.view.style.perspective=600<Math.max(a.width,a.height)?"2000px":"1000px";this.title&&(this.title.style.fontSize=160>a.width?d(this.termData.appName).coverTitleFontSize-8+"px":d(this.termData.appName).coverTitleFontSize+"px",this.title.style.maxWidth=a.width-10+"px");this.thumbImg&&(a=400>Math.max(a.width,a.height)?this.coverSrc[0]:this.coverSrc[1],this.thumbImg.src!=a&&(this.thumbImg.src=a),this.resizeCover())},thumbLoad:function(a){var b=this;
this.coverImgSize=new t(this.thumbImg.naturalWidth,this.thumbImg.naturalHeight);this.resizeCover();this.thumbImg.style.opacity="1";setTimeout(function(){b.view.style.backgroundImage=null},600)},resizeCover:function(){if(this.coverImgSize){var a=X(this.coverImgSize,new t(this._frame.width,this._frame.height),!0,!1);this.thumbImg.style.left=a.x+"px";this.thumbImg.style.top=a.y+"px";this.thumbImg.style.width=a.width+"px";this.thumbImg.style.height=a.height+"px"}}};ia.prototype={loadingStatusHandler:function(a){"termsController"==
a.params.target&&this.showPreloader(!0)},appHandler:function(a){var b=this;this.showPreloader(!1);setTimeout(function(){b.createCoversCollection()},400)},showPreloader:function(a){if(a){if(!(0<this.view.getElementsByClassName("gmAlbumsListMasonryPreloader").length)){var b=L(g(d(this.appName).splashPreloaderColor,.7));this.view.appendChild(b)}}else if(this.view.getElementsByClassName("gmAlbumsListMasonryPreloader")[0]){var c=this;b=this.view.getElementsByClassName("gmAlbumsListMasonryPreloader")[0];
Q(b,function(){c.view.removeChild(b)},500)}},checkCovers:function(){for(var a=0;a<this.covers.length;a++){var b=this.covers[a];this.delegate.terms[b.termData.key]&&this.delegate.terms[b.termData.key].itemsList&&this.delegate.terms[b.termData.key].itemsList[b.termData.listIndex]&&b.termData.term_id==this.delegate.terms[b.termData.key].itemsList[b.termData.listIndex].term_id||(b.view.parentNode&&b.view.parentNode.removeChild(b.view),this.covers.splice(a,1))}},updateCoversCollection:function(){function a(a){if((a=
c[a].itemsList)&&0<a.length)for(var d=0;d<a.length;d++){for(var f=void 0,g=a[d],k=g.term_id,l=0;l<e.covers.length;l++)e.covers[l].id==k&&(f=e.covers[l],f.updateTermData(),l=e.covers.length);f||(f=new R(g),f.view.addEventListener("mouseup",function(a){e.showTermsCollectioHandler(a)}),e.covers.splice(b,0,f),e.view.insertBefore(f.view,e.view.childNodes[0]));b+=1}}this.checkCovers();var b=0,c=this.delegate.terms;if(c){var e=this,d;for(d in c)a(d);this.arangeCovers()}},createCoversCollection:function(){function a(a){if((a=
b[a].itemsList)&&0<a.length)for(var e=void 0,d=0;d<a.length;d++)e=new R(a[d]),e.view.addEventListener("mouseup",function(a){c.showTermsCollectioHandler(a)}),c.covers.push(e),c.view.appendChild(e.view)}var b=this.delegate.terms;if(b){var c=this,e;for(e in b)a(e);this.arangeCovers()}},coverPagination:function(a,b,c,e,d,g){b=b.width;e=Math.min(b-2*g,e);c=Math.min(c,Math.floor((b-g)/(e+g)));e=(b-g)/c-g;return{page:Math.ceil((a+1)/c)-1,size:new t(e,e*d)}},arangeCovers:function(){if(0<this.covers.length){d(this.appName);
this.gmediaTemplate&&(la(),this.view.style.width=window.innerWidth-2*la()+"px");for(var a=0;a<this.covers.length;a++){var b=this.covers[a],c=this.coverPagination(a,new t(this.view.clientWidth,this.view.clientHeight),d(this.appName).columns,d(this.appName).thumbRecommendedSize,d(this.appName).coverThumbRatio,d(this.appName).spaceX);b.size=c.size;b.view.style.marginBottom="none"}b&&(b.view.style.marginBottom=d(this.appName).spaceX+"px")}},getCoverByTer:function(a){for(var b=0;b<this.covers.length;b++)if(a.term_id==
this.covers[b].id)return this.covers[b]},showTermsCollectioHandler:function(a){if(("touchend"==a.type||"mouseup"==a.type)&&!this.dragging){a=a.currentTarget.id.split("_");var b=this.delegate.terms[a[0]].itemsList[a[1]];a=this.getCoverByTer(b);if(a.shareClick){V();this.modal||(this.modal=new N(this));this.modal.type="share";b=a.termData.meta.cover;var c=void 0;a.termData.itemsList&&a.termData.itemsList[0]&&(c=a.termData.itemsList[0].url);b&&(c=b.itemViewThumbSrc);b=new aa(this.appName,this.modal,{title:a.termData.name,
sharelink:a.termData.sharelink,url:c},a.termData.sharelink);this.modal.pushPage(b);a.shareClick=!1}else this.delegate.initCollectionForTermFromIndex(b,0)}},deleteModal:function(){this.modal&&delete this.modal;W()},resizeHandler:function(){this.view.clientWidth!=this.viewWidth&&(this.viewWidth=this.view.clientWidth,this.arangeCovers())}};S.prototype={hasTag:function(a){if("all"==a)return!0;if(!this.tags||0==this.tags.length)return!1;for(var b=0;b<this.tags.length;b++)if(this.tags[b].term_id==a)return!0},
get itemViewSrc(){return this.meta?this.meta.web?this.meta.web.link:this.meta.original?this.meta.original.link:null:null},get itemViewThumbSrc(){return this.meta?this.meta.thumb?this.meta.thumb.link:this.meta.web?this.meta.web.link:null:null},get itemViewSize(){return this.meta?this.meta.web?new t(this.meta.web.width,this.meta.web.height):this.meta.original?new t(this.meta.original.width,this.meta.original.height):new t(300,300):new t(300,300)},get itemViewThumbSize(){return this.meta?this.meta.thumb?
new t(this.meta.thumb.width,this.meta.thumb.height):this.meta.web?new t(this.meta.web.width,this.meta.web.height):new t(300,300):new t(300,300)}};D.prototype={set gmedia__in(a){this._query&&(this._query.gmedia__in=a.toString(),"myCollection"==this.taxonomy&&this._query&&(this.sharelink=d(this.appName).post_url+"/?"+d(this.appName).galleryID+"[gmedia__in]="+this._query.gmedia__in))}};D.termDataByQueryNameId=function(a,b,c){if(!a.gmedia__in)return null;var e=a.gmedia__in.split(",").length,d=a.orderby,
g=a.order;return{count:e,name:b,meta:{_order:g,_orderby:d,order:g,orderby:d},taxonomy:"myCollection",term_id:"myCollection_"+c,_query:a}};ja.prototype={get cover(){return this._cover?this._cover:null}};ka.prototype={getTermsList:function(a){var b=[],c=[],e;for(e in a)switch(e){case "album__in":b.push("gmedia_album");c=c.concat(a[e].split(","));break;case "category__in":b.push("gmedia_category");c=c.concat(a[e].split(","));break;case "tag__in":b.push("gmedia_tag"),c=c.concat(a[e].split(","))}d(this.appName).appEventManager.dispatchGMEvent(new n(r.startLoading,
this,{target:"termsController"}));H(JSON.stringify({library_terms:{taxonomy:b,include:c}}),this,"termsLoaded")},createCollectionByNameAndQuery:function(a,b,c){a=D.termDataByQueryNameId(c,a,b);a=new D(a,null,this.appName);this.terms.myCollection.itemsList.push(a);a.key="myCollection";this.updateTermsInListByTaxonomy("myCollection")},updateTermsInListByTaxonomy:function(a){if(this.terms[a]&&this.terms[a].itemsList)for(var b=0;b<this.terms[a].itemsList.length;b++)this.terms[a].itemsList[b].listIndex=
b},termsLoaded:function(a){if(a)try{var b=JSON.parse(a);b.key&&""!=b.key?d(this.appName).key=b.key:(d(this.appName).tv=document.createElement("div"),d(this.appName).tv.style.position="absolute",d(this.appName).tv.style.height="24px",d(this.appName).tv.innerHTML='<a href="http://bit.ly/2snVAca" style="background-color: rgba(0, 0, 0, 0.8) !important;position: relative !important;left: auto!important;right: auto!important;top: auto!important;bottom: auto!important;width:auto!important;height:auto!important;text-indent:0!important;overflow:visible!important;display:block!important;padding: 4px 10px!important;margin:0 0 -3em 0!important;font-size:14px!important;line-height:120%!important;color:#FFFFFF!important;font-weight:bold!important;visibility:visible!important;opacity:1!important;pointer-events:auto!important;transform:none!important;">Trial version - Gmedia WP Plugin</a>');
for(var c in b){this.terms[c]={};b[c].properties&&(this.terms[c].properties=b[c].properties);var e=b[c].data;if(e&&Array.isArray(e))for(this.terms[c].itemsList=[],a=0;a<e.length;a++){var f=new D(e[a],null,this.appName);f.key=c;f.listIndex=a;this.terms[c].itemsList.push(f)}}d(this.appName).appEventManager.dispatchGMEvent(new n(r.termsLoadingComplete,this,{target:"termsController"}))}catch(k){U(k)}finally{}},getCollectionForTerm:function(a){var b=void 0;switch(a.taxonomy){case "gmedia_album":b="album__in";
break;case "gmedia_category":b="category__in";break;case "gmedia_tag":b="tag__in";break;case "myCollection":b="myCollection"}if(b)if("myCollection"==b){if(a._query){var c={per_page:d(this.appName).pagination?d(this.appName).imagesPperPage:0,admin:!1,page:1};c.gmedia__in=a._query.gmedia__in;c.orderby=a._query.orderby;c.order=a._query.order;b=JSON.stringify({library:c});H(b,this,"initCollectionDataForTerm",{term:a},new n(r.startLoading,this,{target:"CollectionItems"}))}}else c={per_page:d(this.appName).pagination?
d(this.appName).imagesPperPage:0,admin:!1,page:1},c[b]=[a.term_id],b=JSON.stringify({library:c}),H(b,this,"initCollectionDataForTerm",{term:a},new n(r.startLoading,this,{target:"CollectionItems"}))},initCollectionDataForTerm:function(a,b){if(a||b||b.term){b=b.term;try{var c=JSON.parse(a);c.properties&&this.createTermsCollectionAndUpdateProperties(c.properties,b);c.data&&(b.itemsList=[],this.addItemsToCollection(c.data,b),d(this.appName).appEventManager.dispatchGMEvent(new n(r.termColectionLoadingComplete,
this,{term:b})))}catch(e){}finally{}}},createTermsCollectionAndUpdateProperties:function(a,b){if(a){b.properties||(b.properties={});for(var c in a)"album__in"!=c&&"categoy__in"!=c&&"tag__in"!=c&&(b.properties[c]=a[c])}},addItemsToCollection:function(a,b){if(!a||0==a.length)return null;for(var c=[],e=0;e<a.length;e++){var d=new S(a[e],"termCollection_"+b.term_id,this.appName);d.index=b.itemsList.length+e;if(d.tags&&0<d.tags.length)for(var g=0;g<d.tags.length;g++){var h=d.tags[g];b.tagsCloud||(b.tagsCloud=
{});b.tagsCloud[h.term_id]=h.name}c.push(d)}b.itemsList=b.itemsList.concat(c);return c},initCollectionForTermFromIndex:function(a,b){var c=this;this.collection&&this.removeCollection();window.localStorage.getItem("gm_likesSet")&&(this.likesSet=JSON.parse(window.localStorage.getItem("gm_likesSet")));window.localStorage.getItem("gm_bookmarkSet")&&(this.bookmarkSet=JSON.parse(window.localStorage.getItem("gm_bookmarkSet")));this.collection=new ha(this,a);this.activTerm=a;B.desktop||(this.currentLocation.push(window.location.href),
window.history.pushState(null,null,window.location.href),this.popstateHandler=function(){c.slider?c.slider.prepareToRemove():c.collection&&c.collection.prepareToRemove()},window.addEventListener("popstate",this.popstateHandler,!1))},removeCollection:function(){this.collection&&(this.collection=void 0);B.desktop||(this.currentLocation[0]&&window.history.replaceState(null,null,this.currentLocation[0]),this.currentLocation=[],window.removeEventListener("popstate",this.popstateHandler,!1))},initSliderForTermAndItemIndex:function(a,
b){this.slider&&this.slider.prepareToRemove();window.localStorage.getItem("gm_likesSet")&&(this.likesSet=JSON.parse(window.localStorage.getItem("gm_likesSet")));window.localStorage.getItem("gm_bookmarkSet")&&(this.bookmarkSet=JSON.parse(window.localStorage.getItem("gm_bookmarkSet")));this.slider=new da(this,a,b);this.activTerm=a;B.desktop||(this.currentLocation.push(window.location.href),a.itemsList&&a.itemsList[b]&&window.history.pushState(null,null,window.location.href))},updateItemLink:function(a){},
removeSlider:function(){this.slider&&(this.slider=void 0);!B.desktop&&0<this.currentLocation.length&&(window.history.replaceState(null,null,this.currentLocation[this.currentLocation.length-1]),this.currentLocation.splice(this.currentLocation.length-1,1))},itemsCountersUpdate:function(){if(this.viewsSet){var a=[];for(key in this.viewsSet)a.push(key);0<a.length&&(a=JSON.stringify({counter:{likes:[],views:a}}),H(a,this,"itemsCountersUpdateHandler"),this.viewsSet={})}},itemsCountersUpdateHandler:function(a){window.localStorage.setItem("gm_likesSet",
JSON.stringify(this.likesSet))},is_containIdInBookmarkSet:function(a){for(var b=0;b<this.bookmarkSet.length;b++)if(this.bookmarkSet[b]==a)return b;return!1},bookmarkItem:function(a){a=this.activTerm.itemsList[a];if(!a)return!1;a=a.ID;var b=this.is_containIdInBookmarkSet(a);if(b||0===b)return this.bookmarkSet.splice(b,1),this.updateMyCollection(),!1;this.bookmarkSet.push(a);this.updateMyCollection();return!0},updateMyCollection:function(){window.localStorage.setItem("gm_bookmarkSet",JSON.stringify(this.bookmarkSet));
for(var a=void 0,b=0;b<this.terms.myCollection.itemsList.length;b++){var c=this.terms.myCollection.itemsList[b];"myCollection_mybookmarks"==c.term_id&&(a=c,b=this.terms.myCollection.itemsList.length)}0!=this.bookmarkSet.length||a?0==this.bookmarkSet.length&&a?(this.terms.myCollection.itemsList.splice(a.listIndex,1),this.updateTermsInListByTaxonomy("myCollection"),d(this.appName).appEventManager.dispatchGMEvent(new n(r.termsUpdated,this,null))):0<this.bookmarkSet.length&&(a?(a.count=this.bookmarkSet.length,
a.gmedia__in=this.bookmarkSet.toString()):(a=D.termDataByQueryNameId({orderby:"gmedia__in",order:"ASC",gmedia__in:this.bookmarkSet.toString()},d(this.appName).coverTitleForBookmark,"mybookmarks"),a=new D(a,null,this.appName),a.key="myCollection",this.terms.myCollection.itemsList.splice(0,0,a),this.updateTermsInListByTaxonomy("myCollection")),d(this.appName).appEventManager.dispatchGMEvent(new n(r.termsUpdated,this,null))):d(this.appName).appEventManager.dispatchGMEvent(new n(r.termsUpdated,this,null))},
set likeItem(a){if(a=this.activTerm.itemsList[a])a.meta.likes||(a.meta.likes=0),a.meta.likes=parseInt(a.meta.likes)+1,a=a.ID,this.likesSet[a]||(this.likesSet[a]="like",this.viewsSet[a]&&delete this.viewsSet[a],a=JSON.stringify({counter:{likes:[a],views:[a]}}),H(a,this,"itemsCountersUpdateHandler"),window.localStorage.setItem("gm_likesSet",JSON.stringify(this.likesSet)))},set viewItem(a){this.activTerm&&this.activTerm.itemsList[a]&&(this.viewsSet[this.activTerm.itemsList[a].ID]="view",this.lastViewedItemIndex=
a)},windowResizeHandler:function(a){this.mainViewController&&"function"==typeof this.mainViewController.resizeHandler&&this.mainViewController.resizeHandler();this.collection&&this.collection.resizeHandler();this.slider&&this.slider.resizeHandler()},createAudioPlayer:function(){var a=this;var b=document.getElementById("gmAudioPlayer")?document.getElementById("gmAudioPlayer"):new Audio;if(null!=b&&b.canPlayType&&b.canPlayType("audio/mpeg")){var c=function(b){a.slider&&a.slider.audioPlayerHandler(b)};
b.id="gmAudioPlayer";b.setAttribute("type","audio/mpeg");b.setAttribute("codecs","mp3");this.audioPlayer=b;this.appDiv.appendChild(this.audioPlayer);b.addEventListener("ended",c,!1);b.addEventListener("pause",c,!1);b.addEventListener("play",c,!1);b.addEventListener("durationchange",c,!1)}}};(function(){var a=document.body.getElementsByClassName("module_GmediaAlbumsListMasonry"),b=function(a){window.removeEventListener("mousedown",b,!1);window.removeEventListener("touchstart",b,!1);"touchstart"==a.type?
(a.stopPropagation(),M=!1):M=!0};window.addEventListener("mousedown",b,!1);window.addEventListener("touchstart",b,!1);A=500>window.screen.height||500>window.screen.width;for(var c=0;c<a.length;c++){var d=a[c].getAttribute("app-id"),f=this[d];f=new ka(f,d,a[c].parentElement);window[d]=f}})()}codeasily_albumsListMasonrr_module();
